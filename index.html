<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì „ê¸°ì°¨ ìŠ¤ë§ˆíŠ¸ ê³„ì‚°ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8fafc;
            color: #334155;
            line-height: 1.6;
        }

        .page-wrapper {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 32px;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .main-container {
            min-width: 0;
        }

        .container {
            max-width: 900px;
            margin: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }


        .main-content {
            padding: 40px;
        }

        .sidebar-calculator {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            height: fit-content;
            position: sticky;
            top: 80px;
            margin-top: 60px;
        }

        .right-sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .quick-calculator {
            background: white;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            overflow: hidden;
        }

        .quick-calc-header {
            background: #1e293b;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .quick-calc-header h3 {
            margin: 0;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .quick-calc-body {
            padding: 20px;
        }

        .quick-input-group {
            margin-bottom: 16px;
        }

        .quick-input-group label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #475569;
            margin-bottom: 6px;
        }

        .quick-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
        }

        .quick-calc-btn {
            width: 100%;
            padding: 12px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .quick-calc-btn:hover {
            background: #2563eb;
        }

        .quick-results {
            display: none;
        }

        .quick-result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
            font-size: 0.875rem;
        }

        .quick-result-item:last-child {
            border-bottom: none;
        }

        .quick-result-label {
            color: #64748b;
            font-weight: 500;
        }

        .quick-result-value {
            font-weight: 600;
            color: #1e293b;
        }

        .quick-result-value.positive {
            color: #059669;
        }

        .quick-final-result {
            background: #1e293b;
            color: white;
            padding: 16px;
            border-radius: 8px;
            text-align: center;
            margin-top: 16px;
        }

        .quick-final-label {
            font-size: 0.875rem;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .quick-final-value {
            font-size: 1.5rem;
            font-weight: 800;
        }

        .section {
            margin-bottom: 32px;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #475569;
        }

        .required::after {
            content: " *";
            color: #ef4444;
        }

        .input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s;
        }

        .input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .vehicle-selection {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
        }

        .vehicle-tabs {
            display: flex;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
        }

        .vehicle-tab {
            flex: 1;
            padding: 12px 16px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
            color: #64748b;
            transition: all 0.2s;
        }

        .vehicle-tab.active {
            background: white;
            color: #1e293b;
            border-bottom: 2px solid #3b82f6;
        }

        .vehicle-tab-content {
            padding: 16px;
            background: white;
        }

        .vehicle-tab-panel {
            display: none;
        }

        .vehicle-tab-panel.active {
            display: block;
        }

        .vehicle-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
        }

        .vehicle-item {
            padding: 14px 16px;
            border-bottom: 1px solid #f1f5f9;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .vehicle-item:hover {
            background: #f8fafc;
        }

        .vehicle-item:last-child {
            border-bottom: none;
        }

        .vehicle-item.selected {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
        }

        .no-selection-item {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .no-selection-item:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }

        .no-selection-item.selected {
            background: #f1f5f9;
            border-color: #64748b;
            box-shadow: 0 0 0 3px rgba(100, 116, 139, 0.1);
        }

        .no-selection-text {
            font-weight: 600;
            color: #64748b;
            font-size: 1rem;
        }

        .vehicle-name {
            font-weight: 500;
            color: #1e293b;
            font-size: 0.95rem;
            line-height: 1.4;
            flex: 1;
        }

        .vehicle-subsidy {
            font-size: 0.85rem;
            font-weight: 500;
            min-width: 120px;
            text-align: right;
        }

        .subsidy-high {
            color: #059669;
        }

        .subsidy-medium {
            color: #d97706;
        }

        .subsidy-low {
            color: #dc2626;
        }

        .subsidy-none {
            color: #64748b;
        }

        .manufacturer-selection {
            margin-bottom: 16px;
        }

        .price-input-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .price-input {
            flex: 1;
            text-align: right;
        }

        .price-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 12px;
        }

        .price-btn {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            background: #f9fafb;
            color: #374151;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        .price-btn:hover {
            background: #f3f4f6;
            border-color: #9ca3af;
        }

        .calculate-btn {
            width: 100%;
            padding: 16px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .calculate-btn:hover {
            background: #2563eb;
        }

        .result-section {
            background: #ffffff;
            padding: 40px;
            border-radius: 16px;
            margin-top: 32px;
            display: none;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .result-title {
            font-size: 1.75rem;
            font-weight: 700;
            color: #1e293b;
            text-align: center;
            margin-bottom: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }

        .result-item {
            background: #f8fafc;
            padding: 24px 20px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .result-item:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
            transform: translateY(-2px);
        }

        .result-item.subsidy {
            background: linear-gradient(135deg, #f0fdf4 0%, #f7fee7 100%);
            border-color: #bbf7d0;
        }

        .result-item.tax {
            background: linear-gradient(135deg, #fef2f2 0%, #fef7f7 100%);
            border-color: #fecaca;
        }

        .result-item.reduction {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border-color: #d8b4fe;
        }

        .result-label {
            font-size: 0.875rem;
            color: #64748b;
            margin-bottom: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            line-height: 1.2;
        }

        .result-value {
            font-size: 1.4rem;
            font-weight: 800;
            color: #1e293b;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            line-height: 1.2;
        }

        .result-value.positive {
            color: #059669;
        }

        .result-value.negative {
            color: #dc2626;
        }

        .result-icon {
            font-size: 1.2rem;
        }

        .payment-summary {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            align-items: stretch;
        }

        .calculation-breakdown {
            background: #f8fafc;
            padding: 24px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            height: 100%;
            min-height: 200px;
        }

        .calculation-breakdown h4 {
            color: #1e293b;
            margin-bottom: 16px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            font-size: 0.95rem;
        }

        .breakdown-label {
            color: #475569;
            font-weight: 500;
        }

        .breakdown-value {
            color: #1e293b;
            font-weight: 600;
        }

        .breakdown-add .breakdown-label {
            color: #dc2626;
        }

        .breakdown-subtract .breakdown-label {
            color: #059669;
        }

        .breakdown-divider {
            height: 1px;
            background: #e2e8f0;
            margin: 12px 0;
        }

        .breakdown-result {
            border-top: 2px solid #3b82f6;
            padding-top: 12px !important;
            margin-top: 8px;
        }

        .breakdown-result .breakdown-label {
            color: #1e293b;
            font-weight: 700;
            font-size: 1rem;
        }

        .breakdown-result .breakdown-value {
            color: #3b82f6;
            font-weight: 800;
            font-size: 1.1rem;
        }

        .final-result {
            background: linear-gradient(135deg, #1e293b 0%, #475569 100%);
            color: white;
            padding: 32px 24px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(30, 41, 59, 0.2);
            height: 100%;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .final-label {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 20px;
            font-weight: 500;
            line-height: 1.3;
            text-align: center;
            width: 100%;
        }

        .final-value {
            font-size: 2.4rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            line-height: 1.1;
            text-align: center;
            width: 100%;
            flex-wrap: wrap;
        }

        .final-value span {
            font-size: 2.0rem;
        }

        .info-box-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 16px 0;
        }

        .info-box {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 16px;
        }

        .info-box h4 {
            color: #0369a1;
            margin-bottom: 8px;
            font-size: 0.925rem;
        }

        .info-box ul {
            margin-left: 16px;
            color: #0c4a6e;
            font-size: 0.875rem;
        }

        .info-box ul li {
            margin-bottom: 4px;
        }

        .status-indicator {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 20px;
            font-size: 0.875rem;
        }

        .status-indicator.working {
            background: #d1fae5;
            border-color: #10b981;
            color: #047857;
        }

        .status-indicator.error {
            background: #fee2e2;
            border-color: #ef4444;
            color: #dc2626;
        }

        .vehicle-count {
            font-size: 0.875rem;
            color: #64748b;
            margin-bottom: 8px;
            text-align: right;
        }

        .footer-info {
            background: #f1f5f9;
            padding: 24px;
            margin-top: 32px;
            border-radius: 8px;
            border-top: 3px solid #3b82f6;
        }

        .footer-info h4 {
            color: #1e293b;
            margin-bottom: 12px;
            font-size: 1rem;
        }

        .footer-info p {
            color: #475569;
            font-size: 0.875rem;
            margin-bottom: 8px;
        }

        .footer-info a {
            color: #3b82f6;
            text-decoration: none;
        }

        .footer-info a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .page-wrapper {
                display: block;
                padding: 10px;
            }
            
            /* ëª¨ë°”ì¼ì—ì„œ ë¹ ë¥¸ ê³„ì‚°ê¸° ìˆ¨ê¸°ê¸° */
            .right-sidebar {
                display: none;
            }
            
            .container {
                margin: 10px;
                border-radius: 8px;
            }

            .main-content {
                padding: 24px;
            }

            .header {
                padding: 24px;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .price-buttons {
                grid-template-columns: repeat(2, 1fr);
            }

            .result-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .result-item {
                min-height: 100px;
                padding: 20px 16px;
            }

            .result-value {
                font-size: 1.3rem;
            }

            .payment-summary {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .vehicle-tabs {
                flex-direction: column;
            }

            .info-box-container {
                grid-template-columns: 1fr;
            }

            .vehicle-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 4px;
            }

            .vehicle-subsidy {
                text-align: left;
                min-width: auto;
            }

            .final-result {
                min-height: 180px;
                padding: 24px 20px;
            }

            .final-label {
                font-size: 1.0rem;
                margin-bottom: 16px;
            }

            .final-value {
                font-size: 2.0rem;
                flex-direction: column;
                gap: 8px;
            }

            .final-value span {
                font-size: 1.6rem;
            }

            .breakdown-item {
                font-size: 0.875rem;
            }
        }

        @media (max-width: 1200px) {
            .result-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 900px) {
            .result-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <div class="main-container">
            <div class="container">

                <div class="main-content">
                    <!-- í•„ìˆ˜ ì •ë³´ ì…ë ¥ -->
                    <div class="section">
                        
                        <div class="form-group">
                            <label class="form-label required">ì—°ë„ ì„ íƒ</label>
                            <select id="dataYear" class="input" onchange="loadYearData()">
                                <option value="">ë°ì´í„° ë¡œë”© ì¤‘...</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label required">ì°¨ëŸ‰ ì„ íƒ (êµ­ê³  ë³´ì¡°ê¸ˆ ìë™ ì ìš©)</label>
                            <div class="vehicle-selection">
                                <div class="vehicle-tabs">
                                    <button class="vehicle-tab active" onclick="switchVehicleTab('list')">ì°¨ëŸ‰ ëª©ë¡ì—ì„œ ì„ íƒ</button>
                                    <button class="vehicle-tab" onclick="switchVehicleTab('direct')">ì§ì ‘ ì…ë ¥</button>
                                </div>
                                
                                <div class="vehicle-tab-content">
                                    <!-- ì°¨ëŸ‰ ëª©ë¡ íƒ­ -->
                                    <div id="list-tab" class="vehicle-tab-panel active">
                                        <!-- ì œì¡°ì‚¬ ì„ íƒ -->
                                        <div class="manufacturer-selection">
                                            <label class="form-label">ì œì¡°ì‚¬ ì„ íƒ</label>
                                            <select id="manufacturerFilter" class="input" onchange="filterByManufacturer()">
                                                <option value="">ì „ì²´ ì œì¡°ì‚¬</option>
                                            </select>
                                        </div>
                                        
                                        <div class="vehicle-count" id="vehicleCount">ë°ì´í„° ë¡œë”© ì¤‘...</div>
                                        <div class="vehicle-list" id="vehicleList">
                                            <div class="vehicle-item">
                                                <div class="vehicle-name">ì°¨ëŸ‰ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- ì§ì ‘ ì…ë ¥ íƒ­ -->
                                    <div id="direct-tab" class="vehicle-tab-panel">
                                        <div style="margin-top: 16px;">
                                            <label class="form-label">êµ­ê³  ë³´ì¡°ê¸ˆ ì§ì ‘ ì…ë ¥ (ë§Œì›)</label>
                                            <input type="number" id="customSubsidy" class="input" 
                                                   placeholder="ë³´ì¡°ê¸ˆ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 680)" min="0" step="1" />
                                            <p style="font-size: 0.8rem; color: #64748b; margin-top: 8px;">
                                                * ì°¨ëŸ‰ ëª©ë¡ì— ì—†ëŠ” ëª¨ë¸ì˜ ê²½ìš° ì§ì ‘ ë³´ì¡°ê¸ˆì„ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="selectedVehicleInfo" style="margin-top: 12px; padding: 12px; background: #f0f9ff; border-radius: 6px; display: none;">
                                <strong>ì„ íƒëœ ì°¨ëŸ‰:</strong> <span id="selectedVehicleName"></span><br>
                                <strong>êµ­ê³  ë³´ì¡°ê¸ˆ:</strong> <span id="selectedVehicleSubsidy"></span>ë§Œì›
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label required">ì°¨ëŸ‰ ê°€ì•¡ (ë§Œì›)</label>
                            <div class="price-input-container">
                                <input type="number" id="vehiclePrice" class="input price-input" 
                                       placeholder="ì°¨ëŸ‰ ê°€ê²©ì„ ì…ë ¥í•˜ì„¸ìš”" min="0" step="1" oninput="syncQuickCalc()" />
                                <span>ë§Œì›</span>
                            </div>
                            <div class="price-buttons">
                                <button class="price-btn" onclick="addPrice(1000)">+ 1,000ë§Œ</button>
                                <button class="price-btn" onclick="addPrice(500)">+ 500ë§Œ</button>
                                <button class="price-btn" onclick="addPrice(100)">+ 100ë§Œ</button>
                                <button class="price-btn" onclick="addPrice(50)">+ 50ë§Œ</button>
                                <button class="price-btn" onclick="addPrice(10)">+ 10ë§Œ</button>
                                <button class="price-btn" onclick="clearPrice()">ì´ˆê¸°í™”</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label required">ì°¨ëŸ‰ ì¢…ë¥˜</label>
                            <select id="vehicleType" class="input" onchange="syncQuickCalc()">
                                <option value="passenger" selected>ìŠ¹ìš©ì°¨ (7%)</option>
                                <option value="compact">ê²½ì°¨ (4% + 75ë§Œì› ê°ë©´)</option>
                                <option value="van">ìŠ¹í•©ì°¨ (5%)</option>
                                <option value="truck">í™”ë¬¼ì°¨ (5%)</option>
                                <option value="commercial">ì˜ì—…ìš© ìë™ì°¨ (4%)</option>
                            </select>
                        </div>
                    </div>

                    <!-- ì„ íƒ ì •ë³´ ì…ë ¥ -->
                    <div class="section">
                        
                        <div class="form-group">
                            <label class="form-label">ì§€ì—­ ì„ íƒ (ì§€ìì²´ ë³´ì¡°ê¸ˆ)</label>
                            <div class="vehicle-selection">
                                <div class="vehicle-tabs">
                                    <button class="vehicle-tab active" onclick="switchLocalSubsidyTab('region')">ì§€ì—­ë³„ ë³´ì¡°ê¸ˆ</button>
                                    <button class="vehicle-tab" onclick="switchLocalSubsidyTab('manual')">ì§ì ‘ ì…ë ¥</button>
                                </div>
                                
                                <div class="vehicle-tab-content">
                                    <!-- ì§€ì—­ë³„ ë³´ì¡°ê¸ˆ íƒ­ -->
                                    <div id="region-tab" class="vehicle-tab-panel active">
                                        <div style="margin-top: 16px;">
                                            <div class="info-text" style="font-size: 0.875rem; color: #64748b; margin-bottom: 8px;">
                                                * ì°¨ëŸ‰ì„ ë¨¼ì € ì„ íƒí•˜ë©´ í•´ë‹¹ ì°¨ëŸ‰ì˜ ì§€ì—­ë³„ ë³´ì¡°ê¸ˆì´ í‘œì‹œë©ë‹ˆë‹¤
                                            </div>
                                            <select id="localSubsidy" class="input" onchange="syncQuickCalc()">
                                                <option value="0">ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <!-- ì§ì ‘ ì…ë ¥ íƒ­ -->
                                    <div id="manual-tab" class="vehicle-tab-panel">
                                        <div style="margin-top: 16px;">
                                            <label class="form-label">ì§€ìì²´ ë³´ì¡°ê¸ˆ ì§ì ‘ ì…ë ¥ (ë§Œì›)</label>
                                            <input type="number" id="customLocalSubsidy" class="input" 
                                                   placeholder="ì§€ìì²´ ë³´ì¡°ê¸ˆì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 400)" min="0" step="1" value="0" 
                                                   oninput="syncQuickCalc()" />
                                            <p style="font-size: 0.8rem; color: #64748b; margin-top: 8px;">
                                                * ê±°ì£¼ ì§€ì—­ì˜ ì§€ìì²´ ë³´ì¡°ê¸ˆì„ ì§ì ‘ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="info-box-container">
                            <div class="info-box">
                                <h4>ğŸ’° ë³´ì¡°ê¸ˆ ì§€ì› ê¸°ì¤€</h4>
                                <ul>
                                    <li><strong>ì „ì•¡ ì§€ì›:</strong> ì°¨ëŸ‰ ê°€ì•¡ 5,300ë§Œì› ë¯¸ë§Œ</li>
                                    <li><strong>50% ì§€ì›:</strong> 5,300ë§Œì› ì´ìƒ ~ 8,500ë§Œì› ë¯¸ë§Œ</li>
                                    <li><strong>ë¯¸ì§€ì›:</strong> 8,500ë§Œì› ì´ìƒ</li>
                                </ul>
                            </div>
                            <div class="info-box">
                                <h4>ğŸ·ï¸ ì·¨ë“ì„¸ ê°ë©´ í˜œíƒ</h4>
                                <ul>
                                    <li><strong>ê²½ì°¨:</strong> 4% ì ìš© í›„ 75ë§Œì› ê°ë©´</li>
                                    <li><strong>ì¼ë°˜ ì „ê¸°ì°¨:</strong> 2026ë…„ê¹Œì§€ 140ë§Œì›, 2027ë…„ 100ë§Œì› ê°ë©´</li>
                                    <li><strong>í”ŒëŸ¬ê·¸ì¸ í•˜ì´ë¸Œë¦¬ë“œ:</strong> 40ë§Œì› ê°ë©´</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <button class="calculate-btn" onclick="calculateTax()">
                        ê³„ì‚°í•˜ê¸°
                    </button>

                    <!-- ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
                    <div id="resultSection" class="result-section">
                        <h3 class="result-title">
                            ğŸ“Š ê³„ì‚° ê²°ê³¼
                        </h3>
                        
                        <div class="result-grid">
                            <div class="result-item subsidy">
                                <div class="result-label">êµ­ê³  ë³´ì¡°ê¸ˆ</div>
                                <div class="result-value positive" id="nationalSubsidy">
                                    <span class="result-icon">ğŸ’°</span>0ë§Œì›
                                </div>
                            </div>
                            <div class="result-item subsidy">
                                <div class="result-label">ì§€ìì²´ ë³´ì¡°ê¸ˆ</div>
                                <div class="result-value positive" id="localSubsidyAmount">
                                    <span class="result-icon">ğŸ›ï¸</span>0ë§Œì›
                                </div>
                            </div>
                            <div class="result-item subsidy">
                                <div class="result-label">ì´ ë³´ì¡°ê¸ˆ</div>
                                <div class="result-value positive" id="totalSubsidy">
                                    <span class="result-icon">ğŸ’</span>0ë§Œì›
                                </div>
                            </div>
                            <div class="result-item tax">
                                <div class="result-label">ê¸°ë³¸ ì·¨ë“ì„¸</div>
                                <div class="result-value" id="baseTax">
                                    <span class="result-icon">ğŸ“‹</span>0ë§Œì›
                                </div>
                            </div>
                            <div class="result-item reduction">
                                <div class="result-label">ê°ë©´ í˜œíƒ</div>
                                <div class="result-value positive" id="taxReduction">
                                    <span class="result-icon">ğŸ</span>0ë§Œì›
                                </div>
                            </div>
                            <div class="result-item tax">
                                <div class="result-label">ìµœì¢… ì·¨ë“ì„¸</div>
                                <div class="result-value" id="finalTaxInGrid">
                                    <span class="result-icon">ğŸ’¸</span>0ë§Œì›
                                </div>
                            </div>
                        </div>

                        <!-- ì´ ì§€ë¶ˆê¸ˆì•¡ê³¼ ê³„ì‚° ìš”ì•½ -->
                        <div class="payment-summary">
                            <div class="calculation-breakdown">
                                <h4>ğŸ’¡ ê³„ì‚° ìš”ì•½</h4>
                                <div class="breakdown-item">
                                    <span class="breakdown-label">ì°¨ëŸ‰ ê°€ê²©</span>
                                    <span class="breakdown-value" id="vehiclePriceDisplay">0ë§Œì›</span>
                                </div>
                                <div class="breakdown-item breakdown-add">
                                    <span class="breakdown-label">+ ìµœì¢… ì·¨ë“ì„¸</span>
                                    <span class="breakdown-value" id="finalTaxDisplay">0ë§Œì›</span>
                                </div>
                                <div class="breakdown-item breakdown-subtract">
                                    <span class="breakdown-label">- ì´ ë³´ì¡°ê¸ˆ</span>
                                    <span class="breakdown-value" id="totalSubsidyDisplay">0ë§Œì›</span>
                                </div>
                                <div class="breakdown-divider"></div>
                                <div class="breakdown-item breakdown-result">
                                    <span class="breakdown-label">ì‹¤ì œ ì§€ë¶ˆ ê¸ˆì•¡</span>
                                    <span class="breakdown-value" id="totalPaymentBreakdown">0ë§Œì›</span>
                                </div>
                            </div>
                            
                            <div class="final-result">
                                <div class="final-label">ì´ ì°¨ëŸ‰ ì§€ë¶ˆ ê¸ˆì•¡</div>
                                <div class="final-value" id="totalPayment">
                                    <span>ğŸ¦</span>0ë§Œì›
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- í•˜ë‹¨ ì•ˆë‚´ ì •ë³´ -->
                    <div class="footer-info">
                        <h4>ğŸ“Œ ë” ìì„¸í•œ ì •ë³´ í™•ì¸</h4>
                        <p><strong>ì •í™•í•œ ë³´ì¡°ê¸ˆ í™•ì¸:</strong> <a href="https://www.ev.or.kr/nportal/buySupprt/initBuySubsidySupprtAction.do" target="_blank">ì „ê¸°ì°¨ ëˆ„ë¦¬ì§‘</a></p>
                        <p>â€¢ êµ­ê³  ë³´ì¡°ê¸ˆ: êµ¬ë§¤ ë° ì§€ì› â†’ êµ¬ë§¤ë³´ì¡°ê¸ˆ ì§€ì› â†’ êµ­ê³  ë³´ì¡°ê¸ˆ</p>
                        <p>â€¢ ì§€ìì²´ ë³´ì¡°ê¸ˆ: êµ¬ë§¤ ë° ì§€ì› â†’ êµ¬ë§¤ë³´ì¡°ê¸ˆ ì§€ì› â†’ ì§€ìì²´ ë³´ì¡°ê¸ˆ</p>
                        <p>â€¢ êµ¬ë§¤ë³´ì¡°ê¸ˆ ì§€ê¸‰í˜„í™©: êµ¬ë§¤ ë° ì§€ì› â†’ êµ¬ë§¤ë³´ì¡°ê¸ˆ ì§€ê¸‰í˜„í™©</p>
                        <p style="margin-top: 12px; font-size: 0.8rem; color: #64748b;">
                            * ë³¸ ê³„ì‚°ê¸°ëŠ” ì°¸ê³ ìš©ì´ë©°, ì •í™•í•œ ì„¸ì•¡ì€ ê´€í•  ì„¸ë¬´ì„œë‚˜ ì „ë¬¸ê¸°ê´€ì— ë¬¸ì˜í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
                        </p>
                        <p style="font-size: 0.8rem; color: #64748b;">
                            * ì°¨ëŸ‰ ë°ì´í„°ëŠ” ì„ íƒëœ ì—°ë„ ê¸°ì¤€ì´ë©°, ìµœì‹  ì •ë³´ëŠ” ì „ê¸°ì°¨ ëˆ„ë¦¬ì§‘ì—ì„œ í™•ì¸í•˜ì„¸ìš”.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ìš°ì¸¡ ì‚¬ì´ë“œë°” (ë¹ ë¥¸ ê³„ì‚°ê¸°) -->
        <div class="right-sidebar">
            <div class="sidebar-calculator">
                <div class="quick-calculator">
                    <div class="quick-calc-header">
                        <h3>ğŸš€ ë¹ ë¥¸ ê³„ì‚°</h3>
                    </div>
                    <div class="quick-calc-body">
                        <div class="quick-input-group">
                            <label>ì°¨ëŸ‰ ê°€ê²© (ë§Œì›)</label>
                            <input type="number" id="quickPrice" class="quick-input" placeholder="ê°€ê²© ì…ë ¥" min="0" step="1">
                        </div>
                        
                        <div class="quick-input-group">
                            <label>êµ­ê³  ë³´ì¡°ê¸ˆ (ë§Œì›)</label>
                            <input type="number" id="quickSubsidy" class="quick-input" placeholder="ë³´ì¡°ê¸ˆ ì…ë ¥" min="0" step="1" value="0">
                        </div>
                        
                        <div class="quick-input-group">
                            <label>ì§€ìì²´ ë³´ì¡°ê¸ˆ (ë§Œì›)</label>
                            <input type="number" id="quickLocal" class="quick-input" placeholder="ì§€ì—­ ë³´ì¡°ê¸ˆ" min="0" step="1" value="0">
                        </div>
                        
                        <button class="quick-calc-btn" onclick="quickCalculate()">
                            âš¡ ì¦‰ì‹œ ê³„ì‚°
                        </button>
                        
                        <div id="quickResults" class="quick-results">
                            <div class="quick-result-item">
                                <span class="quick-result-label">êµ­ê³  ë³´ì¡°ê¸ˆ</span>
                                <span class="quick-result-value positive" id="quickNationalSubsidy">0ë§Œì›</span>
                            </div>
                            <div class="quick-result-item">
                                <span class="quick-result-label">ì§€ìì²´ ë³´ì¡°ê¸ˆ</span>
                                <span class="quick-result-value positive" id="quickLocalSubsidy">0ë§Œì›</span>
                            </div>
                            <div class="quick-result-item">
                                <span class="quick-result-label">ì´ ë³´ì¡°ê¸ˆ</span>
                                <span class="quick-result-value positive" id="quickTotalSubsidy">0ë§Œì›</span>
                            </div>
                            <div class="quick-result-item">
                                <span class="quick-result-label">ì·¨ë“ì„¸</span>
                                <span class="quick-result-value" id="quickTax">0ë§Œì›</span>
                            </div>
                            
                            <div class="quick-final-result">
                                <div class="quick-final-label">ì´ ì§€ë¶ˆ ê¸ˆì•¡</div>
                                <div class="quick-final-value" id="quickFinalAmount">0ë§Œì›</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let vehicleData = [];
        let regionData = [];
        let selectedVehicle = null;
        let currentTab = 'list';
        let currentLocalSubsidyTab = 'region';
        let filteredVehicles = [];

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log('í˜ì´ì§€ ë¡œë“œ ì‹œì‘...');
            loadAvailableYears();
        });

        // ì‚¬ìš© ê°€ëŠ¥í•œ ì—°ë„ í™•ì¸ ë° ë¡œë“œ
        async function loadAvailableYears() {
            try {
                console.log('ì‚¬ìš© ê°€ëŠ¥í•œ ì—°ë„ í™•ì¸ ì¤‘...');
                
                // ì‚¬ìš© ê°€ëŠ¥í•œ ì—°ë„ë¥¼ ì§ì ‘ ì§€ì • (CSV íŒŒì¼ì´ ìˆëŠ” ì—°ë„)
                const availableYears = [2024, 2025];
                
                // ì—°ë„ ì„ íƒ ì˜µì…˜ ìƒì„±
                populateYearOptions(availableYears);
                
                // ê°€ì¥ ìµœì‹  ì—°ë„ë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •
                const defaultYear = availableYears[availableYears.length - 1];
                document.getElementById('dataYear').value = defaultYear;
                
                // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
                await loadDataFromCSV();
                
            } catch (error) {
                console.error('ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                document.getElementById('dataYear').innerHTML = '<option value="">ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨</option>';
            }
        }

        // ì—°ë„ ì˜µì…˜ ìƒì„±
        function populateYearOptions(years) {
            const yearSelect = document.getElementById('dataYear');
            yearSelect.innerHTML = '';
            
            // ìµœì‹  ì—°ë„ë¶€í„° ì •ë ¬
            years.sort((a, b) => b - a);
            
            years.forEach(year => {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = `${year}ë…„`;
                yearSelect.appendChild(option);
            });
            
            console.log(`ì‚¬ìš© ê°€ëŠ¥í•œ ì—°ë„: ${years.join(', ')}`);
        }

        // CSVì—ì„œ ë°ì´í„° ë¡œë“œ
        async function loadDataFromCSV() {
            try {
                console.log('CSV ë°ì´í„° ë¡œë“œ ì‹œì‘...');
                
                // ì„ íƒëœ ì—°ë„ ê¸°ì¤€ CSV íŒŒì¼ ê²½ë¡œ
                const selectedYear = document.getElementById('dataYear').value;
                
                if (!selectedYear) {
                    console.log('ì„ íƒëœ ì—°ë„ê°€ ì—†ìŠµë‹ˆë‹¤');
                    return;
                }
                
                const csvPath = `csv/${selectedYear}.csv`;
                
                console.log(`CSV íŒŒì¼ ê²½ë¡œ: ${csvPath}`);
                
                // CSV íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
                const response = await fetch(csvPath);
                
                if (!response.ok) {
                    throw new Error(`CSV íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨: HTTP ${response.status} - ${csvPath}`);
                }
                
                const csvText = await response.text();
                console.log(`${selectedYear}ë…„ CSV ë°ì´í„° í¬ê¸°:`, csvText.length);
                
                // CSV íŒŒì‹±
                const data = parseCSV(csvText);
                console.log(`${selectedYear}ë…„ íŒŒì‹±ëœ ë°ì´í„° í–‰ ìˆ˜:`, data.length);
                
                // ë°ì´í„° ì—°ë„ í•„í„°ë§ (2024ë…„ì€ ë°ì´í„°ì—°ë„ ì»¬ëŸ¼ì´ ì—†ìŒ)
                let filteredData;
                if (selectedYear == '2024') {
                    // 2024ë…„ì€ ëª¨ë“  ë°ì´í„° ì‚¬ìš©
                    filteredData = data;
                } else {
                    // 2025ë…„ ì´í›„ëŠ” ë°ì´í„°ì—°ë„ ì»¬ëŸ¼ìœ¼ë¡œ í•„í„°ë§
                    filteredData = data.filter(row => row['ë°ì´í„°ì—°ë„'] == selectedYear);
                }
                console.log(`${selectedYear}ë…„ í•„í„°ë§ëœ ë°ì´í„°:`, filteredData.length);
                
                // ì°¨ëŸ‰ ë°ì´í„° ì²˜ë¦¬
                processVehicleData(filteredData);
                
                // ì§€ì—­ ë°ì´í„° ì²˜ë¦¬
                processRegionData(filteredData);
                
                // UI ì—…ë°ì´íŠ¸
                populateManufacturerOptions();
                populateVehicleList();
                
                // ì§€ì—­ë³„ ë³´ì¡°ê¸ˆ ëª©ë¡ ì´ˆê¸°í™”
                if (currentLocalSubsidyTab === 'region') {
                    updateLocalSubsidyOptions();
                }
                
                console.log(`${selectedYear}ë…„ CSV ë°ì´í„° ë¡œë“œ ì™„ë£Œ`);
                
            } catch (error) {
                console.error('CSV ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                // ì—ëŸ¬ ë°œìƒ ì‹œì—ë„ ê¸°ë³¸ UIëŠ” í‘œì‹œ
                populateManufacturerOptions();
                populateVehicleList();
            }
        }

        // ì—°ë„ ë³€ê²½ ì‹œ ë°ì´í„° ì¬ë¡œë“œ
        async function loadYearData() {
            const selectedYear = document.getElementById('dataYear').value;
            console.log(`${selectedYear}ë…„ ë°ì´í„°ë¡œ ë³€ê²½`);
            
            // ê¸°ì¡´ ì„ íƒ ì´ˆê¸°í™”
            resetVehicleSelection();
            
            // ìƒˆ ì—°ë„ ë°ì´í„° ë¡œë“œ
            await loadDataFromCSV();
        }

        // ì°¨ëŸ‰ ì„ íƒ ì´ˆê¸°í™”
        function resetVehicleSelection() {
            // ëª¨ë“  ì„ íƒ í•´ì œ
            document.querySelectorAll('.vehicle-item, .no-selection-item').forEach(item => item.classList.remove('selected'));
            selectedVehicle = null;
            
            // ì„ íƒëœ ì°¨ëŸ‰ ì •ë³´ ìˆ¨ê¹€
            document.getElementById('selectedVehicleInfo').style.display = 'none';
            
            // ì§€ìì²´ ë³´ì¡°ê¸ˆì´ ì§€ì—­ë³„ íƒ­ì¸ ê²½ìš° ì´ˆê¸°í™”
            if (currentLocalSubsidyTab === 'region') {
                const localSubsidySelect = document.getElementById('localSubsidy');
                // ì°¨ëŸ‰ì´ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš° ì „ì²´ ì§€ì—­ ëª©ë¡ í‘œì‹œ
                if (!selectedVehicle) {
                    updateLocalSubsidyOptions();
                }
                localSubsidySelect.value = 0;
            } else {
                // ì§ì ‘ ì…ë ¥ íƒ­ì¸ ê²½ìš° 0ìœ¼ë¡œ ì´ˆê¸°í™”
                document.getElementById('customLocalSubsidy').value = 0;
            }
            
            // ì œì¡°ì‚¬ í•„í„° ì´ˆê¸°í™”
            document.getElementById('manufacturerFilter').value = '';
            
            // ë¹ ë¥¸ ê³„ì‚°ê¸° ì´ˆê¸°í™”
            document.getElementById('quickSubsidy').value = 0;
            document.getElementById('quickLocal').value = 0;
        }

        // CSV íŒŒì‹± í•¨ìˆ˜
        function parseCSV(csvText) {
            const lines = csvText.split('\n');
            const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
            const data = [];
            
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                
                const values = [];
                let current = '';
                let inQuotes = false;
                
                for (let j = 0; j < line.length; j++) {
                    const char = line[j];
                    
                    if (char === '"') {
                        inQuotes = !inQuotes;
                    } else if (char === ',' && !inQuotes) {
                        values.push(current.trim());
                        current = '';
                    } else {
                        current += char;
                    }
                }
                values.push(current.trim());
                
                if (values.length >= headers.length) {
                    const row = {};
                    headers.forEach((header, index) => {
                        row[header] = values[index];
                    });
                    data.push(row);
                }
            }
            
            return data;
        }

        // ì°¨ëŸ‰ ë°ì´í„° ì²˜ë¦¬
        function processVehicleData(data) {
            const vehicleMap = new Map();
            
            // ì œì¡°ì‚¬ ì´ë¦„ ë§¤í•‘
            const nameMap = {
                'í˜„ëŒ€ìë™ì°¨': 'í˜„ëŒ€',
                'ê¸°ì•„ìë™ì°¨': 'ê¸°ì•„',
                'ê¸°ì•„': 'ê¸°ì•„',
                'ë©”ë¥´ì„¸ë°ìŠ¤ë²¤ì¸ ì½”ë¦¬ì•„': 'ë²¤ì¸ ',
                'ë©”ë¥´ì„¸ë°ìŠ¤-ë²¤ì¸  ì½”ë¦¬ì•„': 'ë²¤ì¸ ',
                'í…ŒìŠ¬ë¼ì½”ë¦¬ì•„': 'í…ŒìŠ¬ë¼',
                'í…ŒìŠ¬ë¼': 'í…ŒìŠ¬ë¼',
                'í­ìŠ¤ë°”ê²ê·¸ë£¹ì½”ë¦¬ì•„': 'í­ìŠ¤ë°”ê²',
                'í¬ë¥´ì‰ì½”ë¦¬ì•„': 'í¬ë¥´ì‰',
                'ë³¼ë³´ìë™ì°¨ì½”ë¦¬ì•„': 'ë³¼ë³´',
                'ì œë„¤ì‹œìŠ¤ì½”ë¦¬ì•„': 'ì œë„¤ì‹œìŠ¤'
            };
            
            data.forEach(row => {
                const originalManufacturer = row['ì œì¡°ì‚¬'];
                const manufacturer = nameMap[originalManufacturer] || originalManufacturer;
                const model = row['ëª¨ë¸ëª…'] || row['ì°¨ì¢…'];
                const nationalSubsidy = parseInt(row['êµ­ë¹„ë³´ì¡°ê¸ˆ(ë§Œì›)']) || 0;
                
                if (manufacturer && model && nationalSubsidy > 0) {
                    const vehicleKey = `${manufacturer}_${model}`;
                    
                    if (!vehicleMap.has(vehicleKey)) {
                        vehicleMap.set(vehicleKey, {
                            id: vehicleKey,
                            manufacturer: manufacturer,
                            model: model,
                            nationalSubsidy: nationalSubsidy,
                            regions: new Map()
                        });
                    }
                    
                    // ì§€ì—­ë³„ ë³´ì¡°ê¸ˆ ì €ì¥
                    const region = row['ì§€ì—­'];
                    const localSubsidy = parseInt(row['ì§€ë°©ë¹„ë³´ì¡°ê¸ˆ(ë§Œì›)']) || 0;
                    
                    if (region && localSubsidy > 0) {
                        vehicleMap.get(vehicleKey).regions.set(region, localSubsidy);
                    }
                }
            });
            
            vehicleData = Array.from(vehicleMap.values());
            filteredVehicles = vehicleData;
            
            console.log(`ì°¨ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì™„ë£Œ: ${vehicleData.length}ê°œ`);
        }

        // ì§€ì—­ ë°ì´í„° ì²˜ë¦¬
        function processRegionData(data) {
            const regionMap = new Map();
            
            data.forEach(row => {
                const region = row['ì§€ì—­'];
                const localSubsidy = parseInt(row['ì§€ë°©ë¹„ë³´ì¡°ê¸ˆ(ë§Œì›)']) || 0;
                
                if (region && localSubsidy > 0) {
                    if (!regionMap.has(region)) {
                        regionMap.set(region, []);
                    }
                    regionMap.get(region).push(localSubsidy);
                }
            });
            
            regionData = [];
            regionMap.forEach((subsidies, region) => {
                // í‰ê·  ë³´ì¡°ê¸ˆ ê³„ì‚°
                const avgSubsidy = Math.round(subsidies.reduce((sum, s) => sum + s, 0) / subsidies.length);
                regionData.push({
                    region: region,
                    subsidy: avgSubsidy,
                    count: subsidies.length
                });
            });
            
            // ì§€ì—­ ìˆœì„œ ì •ë ¬ (ì„œìš¸ -> ê²½ê¸°ë„ -> ê´‘ì—­ì‹œ -> ê¸°íƒ€ ìˆœ)
            const regionOrder = {
                'ì„œìš¸íŠ¹ë³„ì‹œ': 1,
                'ì¸ì²œê´‘ì—­ì‹œ': 2,
                'ê²½ê¸°ë„': 3,
                'ë¶€ì‚°ê´‘ì—­ì‹œ': 4,
                'ëŒ€êµ¬ê´‘ì—­ì‹œ': 5,
                'ê´‘ì£¼ê´‘ì—­ì‹œ': 6,
                'ëŒ€ì „ê´‘ì—­ì‹œ': 7,
                'ìš¸ì‚°ê´‘ì—­ì‹œ': 8,
                'ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ': 9,
                'ì œì£¼íŠ¹ë³„ìì¹˜ë„': 99
            };
            
            regionData.sort((a, b) => {
                const orderA = regionOrder[a.region] || 50;
                const orderB = regionOrder[b.region] || 50;
                if (orderA !== orderB) return orderA - orderB;
                return a.region.localeCompare(b.region);
            });
            
            console.log(`ì§€ì—­ ë°ì´í„° ì²˜ë¦¬ ì™„ë£Œ: ${regionData.length}ê°œ`);
        }

        // ë°ì´í„° ìƒíƒœ ì—…ë°ì´íŠ¸ (í•¨ìˆ˜ ì‚­ì œë¨)

        // ê¸°ë³¸ ë°ì´í„° ë¡œë“œ í•¨ìˆ˜ ì œê±°ë¨

        // ì œì¡°ì‚¬ ì˜µì…˜ ìƒì„±
        function populateManufacturerOptions() {
            const select = document.getElementById('manufacturerFilter');
            if (!select) return;
            
            // ê¸°ì¡´ ì˜µì…˜ ì œê±° (ì²« ë²ˆì§¸ ì œì™¸)
            while (select.children.length > 1) {
                select.removeChild(select.lastChild);
            }
            
            const manufacturers = [...new Set(vehicleData.map(vehicle => vehicle.manufacturer))];
            
            // ì œì¡°ì‚¬ ì´ë¦„ ê°„ì†Œí™”
            const nameMap = {
                'í˜„ëŒ€ìë™ì°¨': 'í˜„ëŒ€',
                'ê¸°ì•„ìë™ì°¨': 'ê¸°ì•„',
                'ê¸°ì•„': 'ê¸°ì•„',
                'ë©”ë¥´ì„¸ë°ìŠ¤ë²¤ì¸ ì½”ë¦¬ì•„': 'ë²¤ì¸ ',
                'ë©”ë¥´ì„¸ë°ìŠ¤-ë²¤ì¸  ì½”ë¦¬ì•„': 'ë²¤ì¸ ',
                'í…ŒìŠ¬ë¼ì½”ë¦¬ì•„': 'í…ŒìŠ¬ë¼',
                'í…ŒìŠ¬ë¼': 'í…ŒìŠ¬ë¼',
                'í­ìŠ¤ë°”ê²ê·¸ë£¹ì½”ë¦¬ì•„': 'í­ìŠ¤ë°”ê²',
                'í¬ë¥´ì‰ì½”ë¦¬ì•„': 'í¬ë¥´ì‰',
                'ë³¼ë³´ìë™ì°¨ì½”ë¦¬ì•„': 'ë³¼ë³´',
                'ì œë„¤ì‹œìŠ¤ì½”ë¦¬ì•„': 'ì œë„¤ì‹œìŠ¤'
            };
            
            // ì œì¡°ì‚¬ ì •ë ¬: í˜„ëŒ€, ê¸°ì•„ ìš°ì„ , ê·¸ ë‹¤ìŒ ì¸ê¸° ì œì¡°ì‚¬
            const priorityOrder = {
                'í˜„ëŒ€': 1,
                'ê¸°ì•„': 2,
                'BMW': 3,
                'ë²¤ì¸ ': 4,
                'í…ŒìŠ¬ë¼': 5,
                'ì•„ìš°ë””': 6,
                'í­ìŠ¤ë°”ê²': 7,
                'ë³¼ë³´': 8,
                'í¬ë¥´ì‰': 9,
                'ì œë„¤ì‹œìŠ¤': 10
            };
            
            manufacturers.sort((a, b) => {
                const displayA = nameMap[a] || a;
                const displayB = nameMap[b] || b;
                const orderA = priorityOrder[displayA] || 999;
                const orderB = priorityOrder[displayB] || 999;
                if (orderA !== orderB) return orderA - orderB;
                return displayA.localeCompare(displayB);
            });
            
            manufacturers.forEach(manufacturer => {
                const option = document.createElement('option');
                option.value = manufacturer;
                const displayName = nameMap[manufacturer] || manufacturer;
                option.textContent = displayName;
                select.appendChild(option);
            });
        }

        // ì œì¡°ì‚¬ë³„ í•„í„°ë§
        function filterByManufacturer() {
            const selectedManufacturer = document.getElementById('manufacturerFilter').value;
            
            if (selectedManufacturer) {
                filteredVehicles = vehicleData.filter(vehicle => vehicle.manufacturer === selectedManufacturer);
            } else {
                filteredVehicles = vehicleData;
            }
            
            populateVehicleList();
            updateVehicleCount(filteredVehicles.length);
        }

        // ì°¨ëŸ‰ ëª©ë¡ ìƒì„±
        function populateVehicleList() {
            const vehicleList = document.getElementById('vehicleList');
            if (!vehicleList) return;
            
            vehicleList.innerHTML = '';
            
            // ì„ íƒ ì•ˆí•¨ ì˜µì…˜ ì¶”ê°€ (ë³„ë„ ë°•ìŠ¤)
            const noSelectionItem = document.createElement('div');
            noSelectionItem.className = 'no-selection-item';
            noSelectionItem.onclick = () => selectVehicleFromList(null, noSelectionItem);
            noSelectionItem.innerHTML = '<div class="no-selection-text">ğŸš« ì°¨ëŸ‰ ì„ íƒ ì•ˆí•¨</div>';
            vehicleList.appendChild(noSelectionItem);
            
            if (filteredVehicles.length === 0) {
                const emptyItem = document.createElement('div');
                emptyItem.className = 'vehicle-item';
                emptyItem.innerHTML = '<div class="vehicle-name">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                vehicleList.appendChild(emptyItem);
                return;
            }
            
            // ì°¨ëŸ‰ ì •ë ¬: ì œì¡°ì‚¬ë³„ë¡œ ì¸ê¸° ëª¨ë¸ ìš°ì„ 
            const vehiclePriority = {
                'í˜„ëŒ€': {'ì•„ì´ì˜¤ë‹‰ 5': 1, 'ì•„ì´ì˜¤ë‹‰ 6': 2, 'ì½”ë‚˜ Electric': 3, 'NEXO': 4},
                'ê¸°ì•„': {'EV6': 1, 'EV9': 2, 'ë‹ˆë¡œ EV': 3, 'ë´‰ê³ 3 EV': 4},
                'BMW': {'i4': 1, 'iX': 2, 'i7': 3},
                'ë²¤ì¸ ': {'EQE': 1, 'EQS': 2, 'EQA': 3},
                'í…ŒìŠ¬ë¼': {'Model 3': 1, 'Model Y': 2, 'Model S': 3, 'Model X': 4}
            };
            
            filteredVehicles.sort((a, b) => {
                const manufacturerPriority = vehiclePriority[a.manufacturer] || {};
                const priorityA = manufacturerPriority[a.model] || 999;
                const priorityB = manufacturerPriority[b.model] || 999;
                if (priorityA !== priorityB) return priorityA - priorityB;
                return b.nationalSubsidy - a.nationalSubsidy; // ë³´ì¡°ê¸ˆ ë†’ì€ ìˆœ
            });
            
            filteredVehicles.forEach((vehicle) => {
                const vehicleItem = document.createElement('div');
                vehicleItem.className = 'vehicle-item';
                vehicleItem.onclick = () => selectVehicleFromList(vehicle, vehicleItem);
                
                // ë³´ì¡°ê¸ˆ ê¸ˆì•¡ì— ë”°ë¥¸ ìƒ‰ìƒ í´ë˜ìŠ¤ ê²°ì •
                let subsidyClass = 'subsidy-high';
                if (vehicle.nationalSubsidy < 300) {
                    subsidyClass = 'subsidy-low';
                } else if (vehicle.nationalSubsidy < 500) {
                    subsidyClass = 'subsidy-medium';
                }
                
                vehicleItem.innerHTML = `
                    <div class="vehicle-name">${vehicle.manufacturer} ${vehicle.model}</div>
                    <div class="vehicle-subsidy ${subsidyClass}">êµ­ê³  ë³´ì¡°ê¸ˆ: ${vehicle.nationalSubsidy}ë§Œì›</div>
                `;
                
                vehicleList.appendChild(vehicleItem);
            });
            
            updateVehicleCount(filteredVehicles.length);
        }

        // ì°¨ëŸ‰ ê°œìˆ˜ ì—…ë°ì´íŠ¸
        function updateVehicleCount(count) {
            const countElement = document.getElementById('vehicleCount');
            if (countElement) {
                countElement.textContent = `ì´ ${count}ê°œ ì°¨ëŸ‰`;
            }
        }

        // ì°¨ëŸ‰ ì„ íƒ
        function selectVehicleFromList(vehicle, element) {
            // ì´ì „ ì„ íƒ í•´ì œ
            document.querySelectorAll('.vehicle-item, .no-selection-item').forEach(item => item.classList.remove('selected'));
            
            // í˜„ì¬ ì„ íƒ í‘œì‹œ
            element.classList.add('selected');
            
            // ì°¨ëŸ‰ ì •ë³´ ì €ì¥
            selectedVehicle = vehicle;
            
            // ì§€ìì²´ ë³´ì¡°ê¸ˆ ì²˜ë¦¬ (ì§€ì—­ë³„ ë³´ì¡°ê¸ˆ íƒ­ì¸ ê²½ìš°ì—ë§Œ)
            if (currentLocalSubsidyTab === 'region') {
                const localSubsidySelect = document.getElementById('localSubsidy');
                
                if (vehicle) {
                    // ì§€ì—­ë³„ ë³´ì¡°ê¸ˆ ì—…ë°ì´íŠ¸
                    updateLocalSubsidyForVehicle(vehicle);
                } else {
                    // ì°¨ëŸ‰ì´ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš° ì „ì²´ ì§€ì—­ ëª©ë¡ í‘œì‹œ
                    updateLocalSubsidyOptions();
                }
                localSubsidySelect.value = 0;
            }
            
            // ì„ íƒëœ ì°¨ëŸ‰ ì •ë³´ í‘œì‹œ
            if (vehicle) {
                showSelectedVehicleInfo(`${vehicle.manufacturer} ${vehicle.model}`, vehicle.nationalSubsidy);
                // ë¹ ë¥¸ ê³„ì‚°ê¸° ë™ê¸°í™”
                document.getElementById('quickSubsidy').value = vehicle.nationalSubsidy;
            } else {
                showSelectedVehicleInfo('ì°¨ëŸ‰ ì„ íƒ ì•ˆí•¨', 0);
                document.getElementById('quickSubsidy').value = 0;
            }
            
            syncQuickCalc();
        }

        // ì§€ì—­ë³„ ë³´ì¡°ê¸ˆ ì˜µì…˜ ì—…ë°ì´íŠ¸ (ì°¨ëŸ‰ì´ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš°)
        function updateLocalSubsidyOptions() {
            const select = document.getElementById('localSubsidy');
            
            // ê¸°ì¡´ ì˜µì…˜ ì œê±°
            select.innerHTML = '<option value="0">ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”</option>';
            
            // ëª¨ë“  ì§€ì—­ ì¶”ê°€
            regionData.forEach(item => {
                const option = document.createElement('option');
                option.value = item.subsidy;
                option.textContent = `${item.region} (${item.subsidy}ë§Œì›)`;
                select.appendChild(option);
            });
        }

        // ì„ íƒëœ ì°¨ëŸ‰ì˜ ì§€ì—­ë³„ ë³´ì¡°ê¸ˆ ì—…ë°ì´íŠ¸
        function updateLocalSubsidyForVehicle(vehicle) {
            const select = document.getElementById('localSubsidy');
            
            // ê¸°ì¡´ ì˜µì…˜ ì œê±°
            select.innerHTML = '<option value="0">ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”</option>';
            
            // ì°¨ëŸ‰ë³„ ì§€ì—­ ë³´ì¡°ê¸ˆì´ ìˆëŠ” ê²½ìš° ìš°ì„  í‘œì‹œ
            if (vehicle && vehicle.regions && vehicle.regions.size > 0) {
                vehicle.regions.forEach((subsidy, region) => {
                    const option = document.createElement('option');
                    option.value = subsidy;
                    option.textContent = `${region} (${subsidy}ë§Œì›) - í•´ë‹¹ ì°¨ëŸ‰`;
                    option.style.fontWeight = 'bold';
                    option.style.color = '#059669';
                    select.appendChild(option);
                });
                
                // êµ¬ë¶„ì„  ì¶”ê°€
                const divider = document.createElement('option');
                divider.disabled = true;
                divider.textContent = 'â”€â”€ ê¸°íƒ€ ì§€ì—­ â”€â”€';
                select.appendChild(divider);
            }
            
            // ë‚˜ë¨¸ì§€ ì§€ì—­ë“¤ ì¶”ê°€
            regionData.forEach(item => {
                // ì´ë¯¸ ì°¨ëŸ‰ë³„ ë°ì´í„°ê°€ ìˆëŠ” ì§€ì—­ì€ ì œì™¸
                if (vehicle && vehicle.regions && vehicle.regions.has(item.region)) {
                    return;
                }
                
                const option = document.createElement('option');
                option.value = item.subsidy;
                option.textContent = `${item.region} (${item.subsidy}ë§Œì›)`;
                select.appendChild(option);
            });
        }

        // ì§€ìì²´ ë³´ì¡°ê¸ˆ ì„ íƒ ì˜µì…˜ ìƒì„± (í•¨ìˆ˜ ì œê±°ë¨)

        // ì§€ìì²´ ë³´ì¡°ê¸ˆ íƒ­ ì „í™˜
        function switchLocalSubsidyTab(tab) {
            currentLocalSubsidyTab = tab;
            
            // íƒ­ ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
            const localSubsidyTabs = document.querySelectorAll('.form-group:last-of-type .vehicle-tab');
            localSubsidyTabs.forEach(t => t.classList.remove('active'));
            localSubsidyTabs[tab === 'region' ? 0 : 1].classList.add('active');
            
            // íƒ­ íŒ¨ë„ í‘œì‹œ/ìˆ¨ê¹€
            document.getElementById('region-tab').classList.toggle('active', tab === 'region');
            document.getElementById('manual-tab').classList.toggle('active', tab === 'manual');
            
            // ë¹ ë¥¸ ê³„ì‚°ê¸° ë™ê¸°í™”
            syncQuickCalc();
        }

        // ì°¨ëŸ‰ íƒ­ ì „í™˜
        function switchVehicleTab(tab) {
            currentTab = tab;
            
            // ì°¨ëŸ‰ ì„ íƒ íƒ­ì˜ íƒ­ ë²„íŠ¼ë§Œ í™œì„±í™” ìƒíƒœ ë³€ê²½
            const vehicleTabButtons = document.querySelectorAll('.vehicle-selection .vehicle-tab');
            vehicleTabButtons.forEach((t, index) => {
                if (index === 0 && tab === 'list') t.classList.add('active');
                else if (index === 1 && tab === 'direct') t.classList.add('active');
                else t.classList.remove('active');
            });
            
            // ì°¨ëŸ‰ ì„ íƒ íƒ­ì˜ íŒ¨ë„ë§Œ ë³€ê²½
            document.getElementById('list-tab').classList.toggle('active', tab === 'list');
            document.getElementById('direct-tab').classList.toggle('active', tab === 'direct');
            
            // ì§ì ‘ ì…ë ¥ íƒ­ìœ¼ë¡œ ì „í™˜ ì‹œ ì°¨ëŸ‰ ì„ íƒ ì´ˆê¸°í™”
            if (tab === 'direct') {
                // ëª¨ë“  ì„ íƒ í•´ì œ
                document.querySelectorAll('.vehicle-item, .no-selection-item').forEach(item => item.classList.remove('selected'));
                selectedVehicle = null;
                
                // ì„ íƒëœ ì°¨ëŸ‰ ì •ë³´ ìˆ¨ê¹€
                document.getElementById('selectedVehicleInfo').style.display = 'none';
                
                // ì§€ìì²´ ë³´ì¡°ê¸ˆì´ ì§€ì—­ë³„ íƒ­ì¸ ê²½ìš° ì´ˆê¸°í™”
                if (currentLocalSubsidyTab === 'region') {
                    const localSubsidySelect = document.getElementById('localSubsidy');
                    // ì°¨ëŸ‰ì´ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš° ì „ì²´ ì§€ì—­ ëª©ë¡ í‘œì‹œ
                    updateLocalSubsidyOptions();
                    localSubsidySelect.value = 0;
                }
                
                // ë¹ ë¥¸ ê³„ì‚°ê¸° ì´ˆê¸°í™”
                document.getElementById('quickSubsidy').value = 0;
                if (currentLocalSubsidyTab === 'region') {
                    document.getElementById('quickLocal').value = 0;
                }
            }
        }

        // ì„ íƒëœ ì°¨ëŸ‰ ì •ë³´ í‘œì‹œ
        function showSelectedVehicleInfo(name, subsidy) {
            document.getElementById('selectedVehicleName').textContent = name;
            document.getElementById('selectedVehicleSubsidy').textContent = subsidy;
            document.getElementById('selectedVehicleInfo').style.display = 'block';
        }

        // ê°€ê²© ì¡°ì‘ í•¨ìˆ˜ë“¤
        function addPrice(amount) {
            const priceInput = document.getElementById('vehiclePrice');
            const currentValue = parseInt(priceInput.value) || 0;
            priceInput.value = currentValue + amount;
            syncQuickCalc();
        }

        function clearPrice() {
            document.getElementById('vehiclePrice').value = '';
            document.getElementById('quickPrice').value = '';
        }

        // ì¢Œì¸¡ê³¼ ìš°ì¸¡ ë™ê¸°í™”
        function syncQuickCalc() {
            const vehiclePrice = document.getElementById('vehiclePrice').value;
            
            if (vehiclePrice) {
                document.getElementById('quickPrice').value = vehiclePrice;
            }

            // ì§€ìì²´ ë³´ì¡°ê¸ˆ ë™ê¸°í™”
            let localSubsidyValue = 0;
            if (currentLocalSubsidyTab === 'region') {
                localSubsidyValue = document.getElementById('localSubsidy').value;
            } else {
                localSubsidyValue = document.getElementById('customLocalSubsidy').value;
            }
            
            if (localSubsidyValue) {
                document.getElementById('quickLocal').value = localSubsidyValue;
            }

            // ì„ íƒëœ ì°¨ëŸ‰ì´ ìˆìœ¼ë©´ ë³´ì¡°ê¸ˆë„ ë™ê¸°í™”
            if (selectedVehicle && selectedVehicle.nationalSubsidy) {
                document.getElementById('quickSubsidy').value = selectedVehicle.nationalSubsidy;
            } else if (currentTab === 'direct') {
                const customSubsidy = document.getElementById('customSubsidy').value;
                if (customSubsidy) {
                    document.getElementById('quickSubsidy').value = customSubsidy;
                }
            }
        }

        // ë¹ ë¥¸ ê³„ì‚° ê¸°ëŠ¥
        function quickCalculate() {
            const quickPrice = parseInt(document.getElementById('quickPrice').value) || 0;
            const quickSubsidy = parseInt(document.getElementById('quickSubsidy').value) || 0;
            const quickLocal = parseInt(document.getElementById('quickLocal').value) || 0;

            if (!quickPrice) return;

            // ë³´ì¡°ê¸ˆ ì§€ì› ê¸°ì¤€ ì ìš©
            let subsidyRate = 1;
            if (quickPrice >= 8500) {
                subsidyRate = 0;
            } else if (quickPrice >= 5300) {
                subsidyRate = 0.5;
            }

            const finalNationalSubsidy = Math.floor(quickSubsidy * subsidyRate);
            const finalLocalSubsidy = Math.floor(quickLocal * subsidyRate);
            const totalSubsidy = finalNationalSubsidy + finalLocalSubsidy;

            // ì°¨ëŸ‰ ì¢…ë¥˜ì— ë”°ë¥¸ ì„¸ìœ¨ ì ìš©
            const vehicleType = document.getElementById('vehicleType').value;
            const taxRates = {
                'passenger': 0.07,
                'compact': 0.04,  // ê²½ì°¨
                'van': 0.05,
                'truck': 0.05,
                'commercial': 0.04
            };
            const taxRate = taxRates[vehicleType] || 0.07;
            
            // ê¸°ë³¸ ì·¨ë“ì„¸ ê³„ì‚°
            const baseTax = Math.floor(quickPrice * taxRate);
            
            // ê°ë©´ ê³„ì‚°
            let taxReduction;
            if (vehicleType === 'compact') {
                // ê²½ì°¨: 4% ì ìš© í›„ 75ë§Œì› ê°ë©´
                taxReduction = 75;
            } else {
                // ì¼ë°˜ ì „ê¸°ì°¨: ìµœëŒ€ 140ë§Œì› ê°ë©´
                taxReduction = Math.min(140, baseTax);
            }
            const finalTax = Math.max(0, baseTax - taxReduction);

            // ì´ ì§€ë¶ˆ ê¸ˆì•¡
            const totalPayment = Math.max(0, quickPrice + finalTax - totalSubsidy);

            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('quickNationalSubsidy').textContent = `${finalNationalSubsidy.toLocaleString()}ë§Œì›`;
            document.getElementById('quickLocalSubsidy').textContent = `${finalLocalSubsidy.toLocaleString()}ë§Œì›`;
            document.getElementById('quickTotalSubsidy').textContent = `${totalSubsidy.toLocaleString()}ë§Œì›`;
            document.getElementById('quickTax').textContent = `${finalTax.toLocaleString()}ë§Œì›`;
            document.getElementById('quickFinalAmount').textContent = `${totalPayment.toLocaleString()}ë§Œì›`;

            document.getElementById('quickResults').style.display = 'block';
        }

        // ë©”ì¸ ê³„ì‚° ê¸°ëŠ¥
        function calculateTax() {
            const vehiclePrice = parseInt(document.getElementById('vehiclePrice').value) || 0;
            const vehicleType = document.getElementById('vehicleType').value;
            
            // ì§€ìì²´ ë³´ì¡°ê¸ˆ ê°€ì ¸ì˜¤ê¸°
            let localSubsidyAmount = 0;
            if (currentLocalSubsidyTab === 'region') {
                localSubsidyAmount = parseInt(document.getElementById('localSubsidy').value) || 0;
            } else {
                localSubsidyAmount = parseInt(document.getElementById('customLocalSubsidy').value) || 0;
            }

            if (!vehiclePrice) {
                alert('ì°¨ëŸ‰ ê°€ì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // êµ­ê³  ë³´ì¡°ê¸ˆ ê²°ì •
            let nationalSubsidy = 0;
            if (currentTab === 'list' && selectedVehicle) {
                nationalSubsidy = selectedVehicle.nationalSubsidy;
            } else if (currentTab === 'direct') {
                nationalSubsidy = parseInt(document.getElementById('customSubsidy').value) || 0;
            }

            // ì„¸ìœ¨ ì„¤ì •
            const taxRates = {
                'passenger': 0.07,
                'compact': 0.04,  // ê²½ì°¨
                'van': 0.05,
                'truck': 0.05,
                'commercial': 0.04
            };

            // ë³´ì¡°ê¸ˆ ì§€ì› ê¸°ì¤€ ì ìš©
            let subsidyRate = 1;
            if (vehiclePrice >= 8500) {
                subsidyRate = 0;
            } else if (vehiclePrice >= 5300) {
                subsidyRate = 0.5;
            }

            const finalNationalSubsidy = Math.floor(nationalSubsidy * subsidyRate);
            const finalLocalSubsidy = Math.floor(localSubsidyAmount * subsidyRate);
            const totalSubsidy = finalNationalSubsidy + finalLocalSubsidy;

            // ê¸°ë³¸ ì·¨ë“ì„¸ ê³„ì‚°
            const taxRate = taxRates[vehicleType];
            const baseTax = Math.floor(vehiclePrice * taxRate);

            // ê°ë©´ ê³„ì‚°
            let taxReduction;
            if (vehicleType === 'compact') {
                // ê²½ì°¨: 4% ì ìš© í›„ 75ë§Œì› ê°ë©´
                taxReduction = 75;
            } else {
                // ì¼ë°˜ ì „ê¸°ì°¨: ìµœëŒ€ 140ë§Œì› ê°ë©´
                taxReduction = Math.min(140, baseTax);
            }
            const finalTax = Math.max(0, baseTax - taxReduction);

            // ì´ ì§€ë¶ˆ ê¸ˆì•¡
            const totalPayment = Math.max(0, vehiclePrice + finalTax - totalSubsidy);

            // ê²°ê³¼ í‘œì‹œ
            displayResults({
                nationalSubsidy: finalNationalSubsidy,
                localSubsidy: finalLocalSubsidy,
                totalSubsidy: totalSubsidy,
                baseTax: baseTax,
                taxReduction: taxReduction,
                finalTax: finalTax,
                totalPayment: totalPayment,
                vehiclePrice: vehiclePrice
            });

            const resultSection = document.getElementById('resultSection');
            resultSection.style.display = 'block';
            resultSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // ë¹ ë¥¸ ê³„ì‚°ë„ ìë™ìœ¼ë¡œ ì‹¤í–‰
            quickCalculate();
        }

        // ê²°ê³¼ í‘œì‹œ
        function displayResults(results) {
            // ê¸°ë³¸ ê²°ê³¼ í‘œì‹œ
            document.getElementById('nationalSubsidy').innerHTML = `<span class="result-icon">ğŸ’°</span>${results.nationalSubsidy.toLocaleString()}ë§Œì›`;
            document.getElementById('localSubsidyAmount').innerHTML = `<span class="result-icon">ğŸ›ï¸</span>${results.localSubsidy.toLocaleString()}ë§Œì›`;
            document.getElementById('totalSubsidy').innerHTML = `<span class="result-icon">ğŸ’</span>${results.totalSubsidy.toLocaleString()}ë§Œì›`;
            document.getElementById('baseTax').innerHTML = `<span class="result-icon">ğŸ“‹</span>${results.baseTax.toLocaleString()}ë§Œì›`;
            document.getElementById('taxReduction').innerHTML = `<span class="result-icon">ğŸ</span>${results.taxReduction.toLocaleString()}ë§Œì›`;
            document.getElementById('finalTaxInGrid').innerHTML = `<span class="result-icon">ğŸ’¸</span>${results.finalTax.toLocaleString()}ë§Œì›`;
            
            // ê³„ì‚° ìš”ì•½ í‘œì‹œ
            document.getElementById('vehiclePriceDisplay').textContent = `${results.vehiclePrice.toLocaleString()}ë§Œì›`;
            document.getElementById('finalTaxDisplay').textContent = `${results.finalTax.toLocaleString()}ë§Œì›`;
            document.getElementById('totalSubsidyDisplay').textContent = `${results.totalSubsidy.toLocaleString()}ë§Œì›`;
            document.getElementById('totalPaymentBreakdown').textContent = `${results.totalPayment.toLocaleString()}ë§Œì›`;
            
            // ìµœì¢… ê²°ê³¼ í‘œì‹œ
            document.getElementById('totalPayment').innerHTML = `<span>ğŸ¦</span>${results.totalPayment.toLocaleString()}ë§Œì›`;
        }
    </script>
</body>
</html>