<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="naver-site-verification" content="ff5731732e25b2a5deb9c1d7103d143df8908aea" />
    <link rel="canonical" href="https://xn--989a00a691b.shop/" />
    
    <!-- Open Graph Î©îÌÉÄ ÌÉúÍ∑∏ -->
    <meta property="og:title" content="Ï†ÑÍ∏∞Ï∞® Íµ¨Îß§ Í≥ÑÏÇ∞Í∏∞ - Î≥¥Ï°∞Í∏à Î∞è Ï∑®ÎìùÏÑ∏ Ïã§ÏãúÍ∞Ñ Í≥ÑÏÇ∞" />
    <meta property="og:description" content="Ï†ÑÍ∏∞Ï∞® Î≥¥Ï°∞Í∏àÍ≥º Ï∑®ÎìùÏÑ∏Î•º ÌïúÎ≤àÏóê Í≥ÑÏÇ∞! ÏµúÏã† Ï†ïÏ±Ö Î∞òÏòÅÎêú Ï∞®ÎüâÎ≥Ñ¬∑ÏßÄÏó≠Î≥Ñ ÎßûÏ∂§ Î≥¥Ï°∞Í∏àÍ≥º Ïã§Ï†ú Íµ¨Îß§ÎπÑÏö©ÏùÑ Î∞îÎ°ú ÌôïÏù∏ÌïòÏÑ∏Ïöî." />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="ko_KR" />
    <meta property="og:site_name" content="Ï†ÑÍ∏∞Ï∞® Íµ¨Îß§ Í≥ÑÏÇ∞Í∏∞" />
    
    <!-- Í∏∞Î≥∏ Î©îÌÉÄ ÌÉúÍ∑∏ -->
    <meta name="description" content="Ï†ÑÍ∏∞Ï∞® Î≥¥Ï°∞Í∏àÍ≥º Ï∑®ÎìùÏÑ∏Î•º ÌïúÎ≤àÏóê Í≥ÑÏÇ∞! ÏµúÏã† Ï†ïÏ±Ö Î∞òÏòÅÎêú Ï∞®ÎüâÎ≥Ñ¬∑ÏßÄÏó≠Î≥Ñ ÎßûÏ∂§ Î≥¥Ï°∞Í∏àÍ≥º Ïã§Ï†ú Íµ¨Îß§ÎπÑÏö©ÏùÑ Î∞îÎ°ú ÌôïÏù∏ÌïòÏÑ∏Ïöî." />
    <meta name="keywords" content="Ï†ÑÍ∏∞Ï∞® Î≥¥Ï°∞Í∏à, Ï†ÑÍ∏∞Ï∞® Í≥ÑÏÇ∞Í∏∞, Ï†ÑÍ∏∞Ï∞® Ï∑®ÎìùÏÑ∏, Íµ≠Í≥†Î≥¥Ï°∞Í∏à, ÏßÄÏûêÏ≤¥Î≥¥Ï°∞Í∏à, Ï†ÑÍ∏∞Ï∞® Î≥¥Ï°∞Í∏à Í≥ÑÏÇ∞" />
    <meta name="author" content="Ï†ÑÍ∏∞Ï∞® Íµ¨Îß§ Í≥ÑÏÇ∞Í∏∞" />
    
    <title>Ï†ÑÍ∏∞Ï∞® Íµ¨Îß§ Í≥ÑÏÇ∞Í∏∞ - Î≥¥Ï°∞Í∏à Î∞è Ï∑®ÎìùÏÑ∏ Ïã§ÏãúÍ∞Ñ Í≥ÑÏÇ∞</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2650860417560439"
     crossorigin="anonymous"></script>
    <style>

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8fafc;
            color: #334155;
            line-height: 1.6;
        }

        .page-wrapper {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 24px;
            max-width: 1280px;
            margin: 0 auto;
            padding: 16px;
        }

        .main-container {
            min-width: 0;
        }

        .container {
            max-width: 840px;
            margin: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }


        .main-content {
            padding: 32px;
        }

        .sidebar-calculator {
            background: #f8fafc;
            padding: 16px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            height: fit-content;
            position: sticky;
            top: 60px;
            margin-top: 40px;
        }

        .right-sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .quick-calculator {
            background: white;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            overflow: hidden;
        }

        .quick-calc-header {
            background: #1e293b;
            color: white;
            padding: 16px;
            text-align: center;
        }

        .quick-calc-header h3 {
            margin: 0;
            font-size: 1.0rem;
            font-weight: 600;
        }

        .quick-calc-body {
            padding: 16px;
        }

        .quick-input-group {
            margin-bottom: 16px;
        }

        .quick-input-group label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #475569;
            margin-bottom: 6px;
        }

        .quick-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
        }

        .quick-calc-btn {
            width: 100%;
            padding: 12px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .quick-calc-btn:hover {
            background: #2563eb;
        }

        .quick-results {
            display: none;
        }

        .quick-result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
            font-size: 0.875rem;
        }

        .quick-result-item:last-child {
            border-bottom: none;
        }

        .quick-result-label {
            color: #64748b;
            font-weight: 500;
        }

        .quick-result-value {
            font-weight: 600;
            color: #1e293b;
        }

        .quick-result-value.positive {
            color: #059669;
        }

        .quick-final-result {
            background: #1e293b;
            color: white;
            padding: 16px;
            border-radius: 8px;
            text-align: center;
            margin-top: 16px;
        }

        .quick-final-label {
            font-size: 0.875rem;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .quick-final-value {
            font-size: 1.5rem;
            font-weight: 800;
        }

        .section {
            margin-bottom: 32px;
        }

        .section-title {
            font-size: 1.15rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 14px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #475569;
        }
        
        .form-inline {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .form-inline .form-label {
            margin-bottom: 0;
            white-space: nowrap;
            min-width: 120px;
        }
        
        .form-inline .input-wrapper {
            flex: 1;
        }

        .required::after {
            content: " *";
            color: #ef4444;
        }

        .input {
            width: 100%;
            padding: 10px 14px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 15px;
            transition: border-color 0.2s;
        }
        
        input[type="number"].input {
            text-align: right;
        }
        
        select.input {
            text-align: center;
        }

        .input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .vehicle-selection {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
        }

        .vehicle-tabs {
            display: flex;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
        }

        .vehicle-tab {
            flex: 1;
            padding: 12px 16px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
            color: #64748b;
            transition: all 0.2s;
        }

        .vehicle-tab.active {
            background: white;
            color: #1e293b;
            border-bottom: 2px solid #3b82f6;
        }

        .vehicle-tab-content {
            padding: 16px;
            background: white;
        }

        .vehicle-tab-panel {
            display: none;
        }

        .vehicle-tab-panel.active {
            display: block;
        }

        .vehicle-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
        }

        .vehicle-item {
            padding: 12px 14px;
            border-bottom: 1px solid #f1f5f9;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .vehicle-item:hover {
            background: #f8fafc;
        }

        .vehicle-item:last-child {
            border-bottom: none;
        }

        .vehicle-item.selected {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
        }

        .no-selection-item {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .no-selection-item:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }

        .no-selection-item.selected {
            background: #f1f5f9;
            border-color: #64748b;
            box-shadow: 0 0 0 3px rgba(100, 116, 139, 0.1);
        }

        .no-selection-text {
            font-weight: 600;
            color: #64748b;
            font-size: 0.95rem;
        }

        .vehicle-name {
            font-weight: 500;
            color: #1e293b;
            font-size: 0.95rem;
            line-height: 1.4;
            flex: 1;
        }

        .vehicle-subsidy {
            font-size: 0.85rem;
            font-weight: 500;
            min-width: 120px;
            text-align: right;
        }

        .subsidy-high {
            color: #059669;
        }

        .subsidy-medium {
            color: #d97706;
        }

        .subsidy-low {
            color: #dc2626;
        }

        .subsidy-none {
            color: #64748b;
        }

        .manufacturer-selection {
            margin-bottom: 16px;
        }

        .price-input-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .price-input {
            flex: 1;
            text-align: right;
        }

        .price-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 12px;
        }

        .price-btn {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            background: #f9fafb;
            color: #374151;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        .price-btn:hover {
            background: #f3f4f6;
            border-color: #9ca3af;
        }

        .calculate-btn {
            width: 100%;
            padding: 16px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .calculate-btn:hover {
            background: #2563eb;
        }

        .result-section {
            background: #ffffff;
            padding: 32px;
            border-radius: 16px;
            margin-top: 24px;
            display: none;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .result-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
            text-align: center;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }

        .result-item {
            background: #f8fafc;
            padding: 24px 20px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .result-item:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
            transform: translateY(-2px);
        }

        .result-item.subsidy {
            background: linear-gradient(135deg, #f0fdf4 0%, #f7fee7 100%);
            border-color: #bbf7d0;
        }

        .result-item.tax {
            background: linear-gradient(135deg, #fef2f2 0%, #fef7f7 100%);
            border-color: #fecaca;
        }

        .result-item.reduction {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border-color: #d8b4fe;
        }

        .result-label {
            font-size: 0.875rem;
            color: #64748b;
            margin-bottom: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            line-height: 1.2;
        }

        .result-value {
            font-size: 1.4rem;
            font-weight: 800;
            color: #1e293b;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            line-height: 1.2;
        }

        .result-value.positive {
            color: #059669;
        }

        .result-value.negative {
            color: #dc2626;
        }

        .result-icon {
            font-size: 1.2rem;
        }

        .payment-summary {
            display: flex;
            justify-content: center;
        }

        .calculation-breakdown {
            background: #f8fafc;
            padding: 24px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            height: 100%;
            min-height: 200px;
        }
        
        .calculation-breakdown.expanded {
            width: 100%;
            max-width: 800px;
        }

        .calculation-breakdown h4 {
            color: #1e293b;
            margin-bottom: 16px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            font-size: 0.95rem;
        }
        
        .breakdown-item.breakdown-sub {
            padding-left: 24px;
            font-size: 0.875rem;
            color: #64748b;
        }

        .breakdown-label {
            color: #475569;
            font-weight: 500;
        }

        .breakdown-value {
            color: #1e293b;
            font-weight: 600;
        }

        .breakdown-add .breakdown-label {
            color: #dc2626;
        }

        .breakdown-subtract .breakdown-label {
            color: #059669;
        }

        .breakdown-divider {
            height: 1px;
            background: #e2e8f0;
            margin: 12px 0;
        }

        .breakdown-result {
            border-top: 2px solid #3b82f6;
            padding-top: 12px !important;
            margin-top: 8px;
        }

        .breakdown-result .breakdown-label {
            color: #1e293b;
            font-weight: 700;
            font-size: 1rem;
        }

        .breakdown-result .breakdown-value {
            color: #3b82f6;
            font-weight: 800;
            font-size: 1.1rem;
        }

        .final-result {
            background: linear-gradient(135deg, #1e293b 0%, #475569 100%);
            color: white;
            padding: 32px 24px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(30, 41, 59, 0.2);
            height: 100%;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .final-label {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 20px;
            font-weight: 500;
            line-height: 1.3;
            text-align: center;
            width: 100%;
        }

        .final-value {
            font-size: 2.4rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            line-height: 1.1;
            text-align: center;
            width: 100%;
            flex-wrap: wrap;
        }

        .final-value span {
            font-size: 2.0rem;
        }

        .info-box-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 16px 0;
        }

        .info-box {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 16px;
        }

        .info-box h4 {
            color: #0369a1;
            margin-bottom: 8px;
            font-size: 0.925rem;
        }

        .info-box ul {
            margin-left: 16px;
            color: #0c4a6e;
            font-size: 0.875rem;
        }

        .info-box ul li {
            margin-bottom: 4px;
        }

        .status-indicator {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 20px;
            font-size: 0.875rem;
        }

        .status-indicator.working {
            background: #d1fae5;
            border-color: #10b981;
            color: #047857;
        }

        .status-indicator.error {
            background: #fee2e2;
            border-color: #ef4444;
            color: #dc2626;
        }

        .vehicle-count {
            font-size: 0.875rem;
            color: #64748b;
            margin-bottom: 8px;
            text-align: right;
        }


        @media (max-width: 768px) {
            .page-wrapper {
                display: block;
                padding: 10px;
            }
            
            /* Î™®Î∞îÏùºÏóêÏÑú Îπ†Î•∏ Í≥ÑÏÇ∞Í∏∞ Ïà®Í∏∞Í∏∞ */
            .right-sidebar {
                display: none;
            }
            
            .container {
                margin: 10px;
                border-radius: 8px;
            }

            .main-content {
                padding: 24px;
            }

            .header {
                padding: 24px;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .price-buttons {
                grid-template-columns: repeat(2, 1fr);
            }

            .result-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .result-item {
                min-height: 100px;
                padding: 20px 16px;
            }

            .result-value {
                font-size: 1.3rem;
            }

            .payment-summary {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .vehicle-tabs {
                flex-direction: column;
            }

            .info-box-container {
                grid-template-columns: 1fr;
            }

            .vehicle-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 4px;
            }

            .vehicle-subsidy {
                text-align: left;
                min-width: auto;
            }

            .final-result {
                min-height: 180px;
                padding: 24px 20px;
            }

            .final-label {
                font-size: 1.0rem;
                margin-bottom: 16px;
            }

            .final-value {
                font-size: 2.0rem;
                flex-direction: column;
                gap: 8px;
            }

            .final-value span {
                font-size: 1.6rem;
            }

            .breakdown-item {
                font-size: 0.875rem;
            }
        }

        /* Îß•Î∂Å 13Ïù∏Ïπò ÌôîÎ©¥ ÏµúÏ†ÅÌôî (1280px ~ 1440px) */
        @media (max-width: 1440px) {
            .page-wrapper {
                gap: 24px;
                padding: 16px;
            }
            
            .container {
                max-width: 800px;
            }
            
            .main-content {
                padding: 32px;
            }
            
            .sidebar-calculator {
                padding: 16px;
                margin-top: 40px;
            }
            
            .quick-calc-header {
                padding: 16px;
            }
            
            .quick-calc-body {
                padding: 16px;
            }
            
            .result-section {
                padding: 32px;
            }
            
            .result-title {
                font-size: 1.5rem;
                margin-bottom: 24px;
            }
            
            .calculation-breakdown {
                padding: 20px;
            }
            
            .final-result {
                padding: 24px 20px;
            }
            
            .final-value {
                font-size: 2.0rem;
            }
            
            .final-value span {
                font-size: 1.6rem;
            }
        }

        /* ÏûëÏùÄ ÎÖ∏Ìä∏Î∂Å ÌôîÎ©¥ (1200px ~ 1280px) */
        @media (max-width: 1280px) {
            .page-wrapper {
                grid-template-columns: 1fr 280px;
                gap: 20px;
            }
            
            .container {
                max-width: 720px;
            }
            
            .main-content {
                padding: 28px;
            }
            
            .section-title {
                font-size: 1.1rem;
            }
            
            .input {
                padding: 10px 14px;
                font-size: 15px;
            }
            
            .price-buttons {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .vehicle-item {
                padding: 12px 14px;
            }
            
            .vehicle-name {
                font-size: 0.9rem;
            }
            
            .vehicle-subsidy {
                font-size: 0.8rem;
            }
            
            .info-box {
                padding: 14px;
            }
            
            .info-box h4 {
                font-size: 0.875rem;
            }
            
            .info-box ul {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 1200px) {
            .result-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 900px) {
            .result-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <div class="page-wrapper">
        <div class="main-container">
            <div class="container">
                <h1 style="text-align: center; font-size: 2.5rem; color: #1e293b; margin-bottom: 2rem; font-weight: 700;">Ï†ÑÍ∏∞Ï∞® Í≥ÑÏÇ∞Í∏∞</h1>

                <div class="main-content">
                    <!-- ÌïÑÏàò Ï†ïÎ≥¥ ÏûÖÎ†• -->
                    <div class="section">
                        
                        <div class="form-group">
                            <label class="form-label required">Ïó∞ÎèÑ ÏÑ†ÌÉù</label>
                            <select id="dataYear" class="input" onchange="loadYearData()">
                                <option value="">Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ï§ë...</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label required">Ï∞®Îüâ ÏÑ†ÌÉù (Íµ≠Í≥† Î≥¥Ï°∞Í∏à ÏûêÎèô Ï†ÅÏö©)</label>
                            <div class="vehicle-selection">
                                <div class="vehicle-tabs">
                                    <button class="vehicle-tab active" onclick="switchVehicleTab('list')">Ï∞®Îüâ Î™©Î°ùÏóêÏÑú ÏÑ†ÌÉù</button>
                                    <button class="vehicle-tab" onclick="switchVehicleTab('direct')">ÏßÅÏ†ë ÏûÖÎ†•</button>
                                </div>
                                
                                <div class="vehicle-tab-content">
                                    <!-- Ï∞®Îüâ Î™©Î°ù ÌÉ≠ -->
                                    <div id="list-tab" class="vehicle-tab-panel active">
                                        <!-- Ï†úÏ°∞ÏÇ¨ ÏÑ†ÌÉù -->
                                        <div class="manufacturer-selection">
                                            <label class="form-label">Ï†úÏ°∞ÏÇ¨ ÏÑ†ÌÉù</label>
                                            <select id="manufacturerFilter" class="input" onchange="filterByManufacturer()">
                                                <option value="">Ï†ÑÏ≤¥ Ï†úÏ°∞ÏÇ¨</option>
                                            </select>
                                        </div>
                                        
                                        <div class="vehicle-count" id="vehicleCount">Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ï§ë...</div>
                                        <div class="vehicle-list" id="vehicleList">
                                            <div class="vehicle-item">
                                                <div class="vehicle-name">Ï∞®Îüâ Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ëÏûÖÎãàÎã§...</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- ÏßÅÏ†ë ÏûÖÎ†• ÌÉ≠ -->
                                    <div id="direct-tab" class="vehicle-tab-panel">
                                        <div style="margin-top: 16px;">
                                            <label class="form-label">Íµ≠Í≥† Î≥¥Ï°∞Í∏à ÏßÅÏ†ë ÏûÖÎ†• (ÎßåÏõê)</label>
                                            <input type="number" id="customSubsidy" class="input" 
                                                   placeholder="Î≥¥Ï°∞Í∏à Í∏àÏï°ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Ïòà: 680)" min="0" step="1" />
                                            <p style="font-size: 0.8rem; color: #64748b; margin-top: 8px;">
                                                * Ï∞®Îüâ Î™©Î°ùÏóê ÏóÜÎäî Î™®Îç∏Ïùò Í≤ΩÏö∞ ÏßÅÏ†ë Î≥¥Ï°∞Í∏àÏùÑ ÏûÖÎ†•Ìï† Ïàò ÏûàÏäµÎãàÎã§.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="selectedVehicleInfo" style="margin-top: 12px; padding: 12px; background: #f0f9ff; border-radius: 6px; display: none;">
                                <strong>ÏÑ†ÌÉùÎêú Ï∞®Îüâ:</strong> <span id="selectedVehicleName"></span><br>
                                <strong>Íµ≠Í≥† Î≥¥Ï°∞Í∏à:</strong> <span id="selectedVehicleSubsidy"></span>ÎßåÏõê
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="form-inline">
                                <label class="form-label required">Ï∞®Îüâ Í∞ÄÏï° (ÎßåÏõê)</label>
                                <div class="input-wrapper">
                                    <input type="number" id="vehiclePrice" class="input" 
                                           placeholder="Ï∞®Îüâ Í∞ÄÍ≤©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" min="0" step="1" oninput="syncQuickCalc()" />
                                </div>
                            </div>
                            <div class="price-buttons">
                                <button class="price-btn" onclick="addPrice(1000)">+ 1,000Îßå</button>
                                <button class="price-btn" onclick="addPrice(500)">+ 500Îßå</button>
                                <button class="price-btn" onclick="addPrice(100)">+ 100Îßå</button>
                                <button class="price-btn" onclick="addPrice(50)">+ 50Îßå</button>
                                <button class="price-btn" onclick="addPrice(10)">+ 10Îßå</button>
                                <button class="price-btn" onclick="clearPrice()">Ï¥àÍ∏∞Ìôî</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="form-inline">
                                <label class="form-label required">Ï∞®Îüâ Ï¢ÖÎ•ò</label>
                                <div class="input-wrapper">
                                    <select id="vehicleType" class="input" onchange="syncQuickCalc()">
                                        <option value="passenger" selected>ÏäπÏö©Ï∞® (7%)</option>
                                        <option value="compact">Í≤ΩÏ∞® (4% + 75ÎßåÏõê Í∞êÎ©¥)</option>
                                        <option value="van">ÏäπÌï©Ï∞® (5%)</option>
                                        <option value="truck">ÌôîÎ¨ºÏ∞® (5%)</option>
                                        <option value="commercial">ÏòÅÏóÖÏö© ÏûêÎèôÏ∞® (4%)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÏÑ†ÌÉù Ï†ïÎ≥¥ ÏûÖÎ†• -->
                    <div class="section">
                        
                        <div class="form-group">
                            <label class="form-label">ÏßÄÏó≠ ÏÑ†ÌÉù (ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏à)</label>
                            <div class="vehicle-selection">
                                <div class="vehicle-tabs">
                                    <button class="vehicle-tab active" onclick="switchLocalSubsidyTab('region')">ÏßÄÏó≠Î≥Ñ Î≥¥Ï°∞Í∏à</button>
                                    <button class="vehicle-tab" onclick="switchLocalSubsidyTab('manual')">ÏßÅÏ†ë ÏûÖÎ†•</button>
                                </div>
                                
                                <div class="vehicle-tab-content">
                                    <!-- ÏßÄÏó≠Î≥Ñ Î≥¥Ï°∞Í∏à ÌÉ≠ -->
                                    <div id="region-tab" class="vehicle-tab-panel active">
                                        <div style="margin-top: 16px;">
                                            <div class="info-text" style="font-size: 0.875rem; color: #64748b; margin-bottom: 8px;">
                                                * Ï∞®ÎüâÏùÑ Î®ºÏ†Ä ÏÑ†ÌÉùÌïòÎ©¥ Ìï¥Îãπ Ï∞®ÎüâÏùò ÏßÄÏó≠Î≥Ñ Î≥¥Ï°∞Í∏àÏù¥ ÌëúÏãúÎê©ÎãàÎã§
                                            </div>
                                            <select id="localSubsidy" class="input" onchange="syncQuickCalc()">
                                                <option value="0">ÏßÄÏó≠ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <!-- ÏßÅÏ†ë ÏûÖÎ†• ÌÉ≠ -->
                                    <div id="manual-tab" class="vehicle-tab-panel">
                                        <div style="margin-top: 16px;">
                                            <label class="form-label">ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏à ÏßÅÏ†ë ÏûÖÎ†• (ÎßåÏõê)</label>
                                            <input type="number" id="customLocalSubsidy" class="input" 
                                                   placeholder="ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏àÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Ïòà: 400)" min="0" step="1" value="0" 
                                                   oninput="syncQuickCalc()" />
                                            <p style="font-size: 0.8rem; color: #64748b; margin-top: 8px;">
                                                * Í±∞Ï£º ÏßÄÏó≠Ïùò ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏àÏùÑ ÏßÅÏ†ë ÏûÖÎ†•Ìï† Ïàò ÏûàÏäµÎãàÎã§.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="info-box-container">
                            <div class="info-box">
                                <h4>üí∞ Î≥¥Ï°∞Í∏à ÏßÄÏõê Í∏∞Ï§Ä</h4>
                                <ul>
                                    <li><strong>Ï†ÑÏï° ÏßÄÏõê:</strong> Ï∞®Îüâ Í∞ÄÏï° 5,300ÎßåÏõê ÎØ∏Îßå</li>
                                    <li><strong>50% ÏßÄÏõê:</strong> 5,300ÎßåÏõê Ïù¥ÏÉÅ ~ 8,500ÎßåÏõê ÎØ∏Îßå</li>
                                    <li><strong>ÎØ∏ÏßÄÏõê:</strong> 8,500ÎßåÏõê Ïù¥ÏÉÅ</li>
                                </ul>
                            </div>
                            <div class="info-box">
                                <h4>üè∑Ô∏è Ï∑®ÎìùÏÑ∏ Í∞êÎ©¥ ÌòúÌÉù</h4>
                                <ul>
                                    <li><strong>Í≤ΩÏ∞®:</strong> 4% Ï†ÅÏö© ÌõÑ 75ÎßåÏõê Í∞êÎ©¥</li>
                                    <li><strong>ÏùºÎ∞ò Ï†ÑÍ∏∞Ï∞®:</strong> 2026ÎÖÑÍπåÏßÄ 140ÎßåÏõê, 2027ÎÖÑ 100ÎßåÏõê Í∞êÎ©¥</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <button class="calculate-btn" onclick="calculateTax()">
                        Í≥ÑÏÇ∞ÌïòÍ∏∞
                    </button>

                    <!-- Í≤∞Í≥º ÌëúÏãú ÏòÅÏó≠ -->
                    <div id="resultSection" class="result-section">
                        <h3 class="result-title">
                            üìä Í≥ÑÏÇ∞ Í≤∞Í≥º
                        </h3>
                        
                        <!-- Í≥ÑÏÇ∞ ÏöîÏïΩÎßå ÌëúÏãú -->
                        <div class="payment-summary">
                            <div class="calculation-breakdown expanded">
                                <h4>üí° Í≥ÑÏÇ∞ ÏöîÏïΩ</h4>
                                
                                <!-- Ï∞®Îüâ Í∞ÄÍ≤© -->
                                <div class="breakdown-item">
                                    <span class="breakdown-label">Ï∞®Îüâ Í∞ÄÍ≤©</span>
                                    <span class="breakdown-value" id="vehiclePriceDisplay">0ÎßåÏõê</span>
                                </div>
                                
                                <!-- Ï∑®ÎìùÏÑ∏ ÏÑ∏Î∂Ä Ìï≠Î™© -->
                                <div class="breakdown-item breakdown-sub">
                                    <span class="breakdown-label">Í∏∞Î≥∏ Ï∑®ÎìùÏÑ∏</span>
                                    <span class="breakdown-value" id="baseTaxDisplay">0ÎßåÏõê</span>
                                </div>
                                <div class="breakdown-item breakdown-sub">
                                    <span class="breakdown-label">- Í∞êÎ©¥ ÌòúÌÉù</span>
                                    <span class="breakdown-value" id="taxReductionDisplay">0ÎßåÏõê</span>
                                </div>
                                <div class="breakdown-item breakdown-add">
                                    <span class="breakdown-label">+ ÏµúÏ¢Ö Ï∑®ÎìùÏÑ∏</span>
                                    <span class="breakdown-value" id="finalTaxDisplay">0ÎßåÏõê</span>
                                </div>
                                
                                <!-- Î≥¥Ï°∞Í∏à ÏÑ∏Î∂Ä Ìï≠Î™© -->
                                <div class="breakdown-item breakdown-sub">
                                    <span class="breakdown-label">Íµ≠Í≥† Î≥¥Ï°∞Í∏à</span>
                                    <span class="breakdown-value" id="nationalSubsidyDisplay">0ÎßåÏõê</span>
                                </div>
                                <div class="breakdown-item breakdown-sub">
                                    <span class="breakdown-label">ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏à</span>
                                    <span class="breakdown-value" id="localSubsidyDisplay">0ÎßåÏõê</span>
                                </div>
                                <div class="breakdown-item breakdown-subtract">
                                    <span class="breakdown-label">- Ï¥ù Î≥¥Ï°∞Í∏à</span>
                                    <span class="breakdown-value" id="totalSubsidyDisplay">0ÎßåÏõê</span>
                                </div>
                                
                                <div class="breakdown-divider"></div>
                                <div class="breakdown-item breakdown-result">
                                    <span class="breakdown-label">Ïã§Ï†ú ÏßÄÎ∂à Í∏àÏï°</span>
                                    <span class="breakdown-value" id="totalPaymentBreakdown">0ÎßåÏõê</span>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- Ïö∞Ï∏° ÏÇ¨Ïù¥ÎìúÎ∞î (Îπ†Î•∏ Í≥ÑÏÇ∞Í∏∞) -->
        <div class="right-sidebar">
            <div class="sidebar-calculator">
                <div class="quick-calculator">
                    <div class="quick-calc-header">
                        <h3>üöÄ Îπ†Î•∏ Í≥ÑÏÇ∞</h3>
                    </div>
                    <div class="quick-calc-body">
                        <div class="quick-input-group">
                            <label>Ï∞®Îüâ Í∞ÄÍ≤© (ÎßåÏõê)</label>
                            <input type="number" id="quickPrice" class="quick-input" placeholder="Í∞ÄÍ≤© ÏûÖÎ†•" min="0" step="1">
                        </div>
                        
                        <div class="quick-input-group">
                            <label>Íµ≠Í≥† Î≥¥Ï°∞Í∏à (ÎßåÏõê)</label>
                            <input type="number" id="quickSubsidy" class="quick-input" placeholder="Î≥¥Ï°∞Í∏à ÏûÖÎ†•" min="0" step="1" value="0">
                        </div>
                        
                        <div class="quick-input-group">
                            <label>ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏à (ÎßåÏõê)</label>
                            <input type="number" id="quickLocal" class="quick-input" placeholder="ÏßÄÏó≠ Î≥¥Ï°∞Í∏à" min="0" step="1" value="0">
                        </div>
                        
                        <button class="quick-calc-btn" onclick="quickCalculate()">
                            ‚ö° Ï¶âÏãú Í≥ÑÏÇ∞
                        </button>
                        
                        <div id="quickResults" class="quick-results">
                            <div class="quick-result-item">
                                <span class="quick-result-label">Íµ≠Í≥† Î≥¥Ï°∞Í∏à</span>
                                <span class="quick-result-value positive" id="quickNationalSubsidy">0ÎßåÏõê</span>
                            </div>
                            <div class="quick-result-item">
                                <span class="quick-result-label">ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏à</span>
                                <span class="quick-result-value positive" id="quickLocalSubsidy">0ÎßåÏõê</span>
                            </div>
                            <div class="quick-result-item">
                                <span class="quick-result-label">Ï¥ù Î≥¥Ï°∞Í∏à</span>
                                <span class="quick-result-value positive" id="quickTotalSubsidy">0ÎßåÏõê</span>
                            </div>
                            <div class="quick-result-item">
                                <span class="quick-result-label">Ï∑®ÎìùÏÑ∏</span>
                                <span class="quick-result-value" id="quickTax">0ÎßåÏõê</span>
                            </div>
                            
                            <div class="quick-final-result">
                                <div class="quick-final-label">Ï¥ù ÏßÄÎ∂à Í∏àÏï°</div>
                                <div class="quick-final-value" id="quickFinalAmount">0ÎßåÏõê</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/region-data.js"></script>
    <script>
        // Ï†ÑÏó≠ Î≥ÄÏàò
        let vehicleData = [];
        let regionData = [];
        let selectedVehicle = null;
        let currentTab = 'list';
        let currentLocalSubsidyTab = 'region';
        let filteredVehicles = [];

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ÌéòÏù¥ÏßÄ Î°úÎìú ÏãúÏûë...');
            loadAvailableYears();
        });

        // ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Ïó∞ÎèÑ ÌôïÏù∏ Î∞è Î°úÎìú
        async function loadAvailableYears() {
            try {
                console.log('ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Ïó∞ÎèÑ ÌôïÏù∏ Ï§ë...');
                
                // ÌòÑÏû¨ Ïó∞ÎèÑ Í∏∞Ï§ÄÏúºÎ°ú 3ÎÖÑÍ∞ÑÏùò Îç∞Ïù¥ÌÑ∞ Ïó∞ÎèÑ Í≥ÑÏÇ∞
                const currentYear = new Date().getFullYear();
                const availableYears = [];
                
                // ÏïåÎ†§ÏßÑ CSV ÌååÏùº Î™©Î°ù (Ïã§Ï†ú Ï°¥Ïû¨ÌïòÎäî ÌååÏùºÎßå)
                // ÏÉàÎ°úÏö¥ Ïó∞ÎèÑ CSV ÌååÏùº Ï∂îÍ∞Ä Ïãú Ïó¨Í∏∞Ïóê Ïó∞ÎèÑÎ•º Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî
                // Ïòà: const knownYears = [2025, 2026, 2027];
                const knownYears = [2025]; // ÌòÑÏû¨ Ï°¥Ïû¨ÌïòÎäî Ïó∞ÎèÑ
                
                // 3ÎÖÑ Î≤îÏúÑ ÎÇ¥ÏóêÏÑú Ïã§Ï†ú ÌååÏùºÏù¥ ÏûàÎäî Ïó∞ÎèÑÎßå ÌôïÏù∏
                for (let year of knownYears) {
                    if (year >= currentYear - 2 && year <= currentYear + 1) {
                        try {
                            // Ïã§Ï†ú ÌååÏùº Ï°¥Ïû¨ Ïó¨Î∂Ä Ïû¨ÌôïÏù∏
                            const response = await fetch(`csv/${year}.csv`);
                            if (response.ok) {
                                availableYears.push(year);
                            }
                        } catch (e) {
                            console.log(`${year}.csv ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.`);
                        }
                    }
                }
                
                // ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Ïó∞ÎèÑÍ∞Ä ÏóÜÏúºÎ©¥ ÏóêÎü¨ Ï≤òÎ¶¨
                if (availableYears.length === 0) {
                    throw new Error('ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.');
                }
                
                // Ïó∞ÎèÑ ÏÑ†ÌÉù ÏòµÏÖò ÏÉùÏÑ±
                populateYearOptions(availableYears);
                
                // ÌòÑÏû¨ Ïó∞ÎèÑÎ•º Í∏∞Î≥∏Í∞íÏúºÎ°ú ÏÑ§Ï†ï (ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Ïó∞ÎèÑ Ï§ëÏóêÏÑú)
                const defaultYear = availableYears.includes(currentYear) ? currentYear : availableYears[availableYears.length - 1];
                document.getElementById('dataYear').value = defaultYear;
                
                // Ï¥àÍ∏∞ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
                await loadDataFromCSV();
                
            } catch (error) {
                console.error('Ï¥àÍ∏∞Ìôî Ïã§Ìå®:', error);
                document.getElementById('dataYear').innerHTML = '<option value="">Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®</option>';
            }
        }

        // Ïó∞ÎèÑ ÏòµÏÖò ÏÉùÏÑ±
        function populateYearOptions(years) {
            const yearSelect = document.getElementById('dataYear');
            yearSelect.innerHTML = '';
            
            // ÏµúÏã† Ïó∞ÎèÑÎ∂ÄÌÑ∞ Ï†ïÎ†¨
            years.sort((a, b) => b - a);
            
            years.forEach(year => {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = `${year}ÎÖÑ`;
                yearSelect.appendChild(option);
            });
            
            console.log(`ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Ïó∞ÎèÑ: ${years.join(', ')}`);
        }

        // CSVÏóêÏÑú Îç∞Ïù¥ÌÑ∞ Î°úÎìú
        async function loadDataFromCSV() {
            try {
                console.log('CSV Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏãúÏûë...');
                
                // ÏÑ†ÌÉùÎêú Ïó∞ÎèÑ Í∏∞Ï§Ä CSV ÌååÏùº Í≤ΩÎ°ú
                const selectedYear = document.getElementById('dataYear').value;
                
                if (!selectedYear) {
                    console.log('ÏÑ†ÌÉùÎêú Ïó∞ÎèÑÍ∞Ä ÏóÜÏäµÎãàÎã§');
                    return;
                }
                
                const csvPath = `csv/${selectedYear}.csv`;
                
                console.log(`CSV ÌååÏùº Í≤ΩÎ°ú: ${csvPath}`);
                
                // CSV ÌååÏùº Í∞ÄÏ†∏Ïò§Í∏∞
                const response = await fetch(csvPath);
                
                if (!response.ok) {
                    throw new Error(`CSV ÌååÏùº Î°úÎìú Ïã§Ìå®: HTTP ${response.status} - ${csvPath}`);
                }
                
                const csvText = await response.text();
                console.log(`${selectedYear}ÎÖÑ CSV Îç∞Ïù¥ÌÑ∞ ÌÅ¨Í∏∞:`, csvText.length);
                
                // CSV ÌååÏã±
                const data = parseCSV(csvText);
                console.log(`${selectedYear}ÎÖÑ ÌååÏã±Îêú Îç∞Ïù¥ÌÑ∞ Ìñâ Ïàò:`, data.length);
                
                // Îç∞Ïù¥ÌÑ∞ Ïó∞ÎèÑ ÌïÑÌÑ∞ÎßÅ (2024ÎÖÑÏùÄ Îç∞Ïù¥ÌÑ∞Ïó∞ÎèÑ Ïª¨ÎüºÏù¥ ÏóÜÏùå)
                let filteredData;
                if (selectedYear == '2024') {
                    // 2024ÎÖÑÏùÄ Î™®Îì† Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö©
                    filteredData = data;
                } else {
                    // 2025ÎÖÑ Ïù¥ÌõÑÎäî Îç∞Ïù¥ÌÑ∞Ïó∞ÎèÑ Ïª¨ÎüºÏúºÎ°ú ÌïÑÌÑ∞ÎßÅ
                    filteredData = data.filter(row => row['Îç∞Ïù¥ÌÑ∞Ïó∞ÎèÑ'] == selectedYear);
                }
                console.log(`${selectedYear}ÎÖÑ ÌïÑÌÑ∞ÎßÅÎêú Îç∞Ïù¥ÌÑ∞:`, filteredData.length);
                
                // Ï∞®Îüâ Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨
                processVehicleData(filteredData);
                
                // ÏßÄÏó≠ Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨
                processRegionData(filteredData);
                
                // UI ÏóÖÎç∞Ïù¥Ìä∏
                populateManufacturerOptions();
                populateVehicleList();
                
                // ÏßÄÏó≠Î≥Ñ Î≥¥Ï°∞Í∏à Î™©Î°ù Ï¥àÍ∏∞Ìôî
                if (currentLocalSubsidyTab === 'region') {
                    updateLocalSubsidyOptions();
                }
                
                console.log(`${selectedYear}ÎÖÑ CSV Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏôÑÎ£å`);
                
            } catch (error) {
                console.error('CSV Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®:', error);
                // ÏóêÎü¨ Î∞úÏÉù ÏãúÏóêÎèÑ Í∏∞Î≥∏ UIÎäî ÌëúÏãú
                populateManufacturerOptions();
                populateVehicleList();
            }
        }

        // Ïó∞ÎèÑ Î≥ÄÍ≤Ω Ïãú Îç∞Ïù¥ÌÑ∞ Ïû¨Î°úÎìú
        async function loadYearData() {
            const selectedYear = document.getElementById('dataYear').value;
            console.log(`${selectedYear}ÎÖÑ Îç∞Ïù¥ÌÑ∞Î°ú Î≥ÄÍ≤Ω`);
            
            // Í∏∞Ï°¥ ÏÑ†ÌÉù Ï¥àÍ∏∞Ìôî
            resetVehicleSelection();
            
            // ÏÉà Ïó∞ÎèÑ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
            await loadDataFromCSV();
        }

        // Ï∞®Îüâ ÏÑ†ÌÉù Ï¥àÍ∏∞Ìôî
        function resetVehicleSelection() {
            // Î™®Îì† ÏÑ†ÌÉù Ìï¥Ï†ú
            document.querySelectorAll('.vehicle-item, .no-selection-item').forEach(item => item.classList.remove('selected'));
            selectedVehicle = null;
            
            // ÏÑ†ÌÉùÎêú Ï∞®Îüâ Ï†ïÎ≥¥ Ïà®ÍπÄ
            document.getElementById('selectedVehicleInfo').style.display = 'none';
            
            // ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏àÏù¥ ÏßÄÏó≠Î≥Ñ ÌÉ≠Ïù∏ Í≤ΩÏö∞ Ï¥àÍ∏∞Ìôî
            if (currentLocalSubsidyTab === 'region') {
                const localSubsidySelect = document.getElementById('localSubsidy');
                // Ï∞®ÎüâÏù¥ ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ Ï†ÑÏ≤¥ ÏßÄÏó≠ Î™©Î°ù ÌëúÏãú
                if (!selectedVehicle) {
                    updateLocalSubsidyOptions();
                }
                localSubsidySelect.value = 0;
            } else {
                // ÏßÅÏ†ë ÏûÖÎ†• ÌÉ≠Ïù∏ Í≤ΩÏö∞ 0ÏúºÎ°ú Ï¥àÍ∏∞Ìôî
                document.getElementById('customLocalSubsidy').value = 0;
            }
            
            // Ï†úÏ°∞ÏÇ¨ ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî
            document.getElementById('manufacturerFilter').value = '';
            
            // Îπ†Î•∏ Í≥ÑÏÇ∞Í∏∞ Ï¥àÍ∏∞Ìôî
            document.getElementById('quickSubsidy').value = 0;
            document.getElementById('quickLocal').value = 0;
        }

        // CSV ÌååÏã± Ìï®Ïàò
        function parseCSV(csvText) {
            const lines = csvText.split('\n');
            const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
            const data = [];
            
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                
                const values = [];
                let current = '';
                let inQuotes = false;
                
                for (let j = 0; j < line.length; j++) {
                    const char = line[j];
                    
                    if (char === '"') {
                        inQuotes = !inQuotes;
                    } else if (char === ',' && !inQuotes) {
                        values.push(current.trim());
                        current = '';
                    } else {
                        current += char;
                    }
                }
                values.push(current.trim());
                
                if (values.length >= headers.length) {
                    const row = {};
                    headers.forEach((header, index) => {
                        row[header] = values[index];
                    });
                    data.push(row);
                }
            }
            
            return data;
        }

        // Ï∞®Îüâ Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨
        function processVehicleData(data) {
            const vehicleMap = new Map();
            
            // Ï†úÏ°∞ÏÇ¨ Ïù¥Î¶Ñ Îß§Ìïë
            const nameMap = {
                'ÌòÑÎåÄÏûêÎèôÏ∞®': 'ÌòÑÎåÄ',
                'Í∏∞ÏïÑÏûêÎèôÏ∞®': 'Í∏∞ÏïÑ',
                'Í∏∞ÏïÑ': 'Í∏∞ÏïÑ',
                'Î©îÎ•¥ÏÑ∏Îç∞Ïä§Î≤§Ï∏†ÏΩîÎ¶¨ÏïÑ': 'Î≤§Ï∏†',
                'Î©îÎ•¥ÏÑ∏Îç∞Ïä§-Î≤§Ï∏† ÏΩîÎ¶¨ÏïÑ': 'Î≤§Ï∏†',
                'ÌÖåÏä¨ÎùºÏΩîÎ¶¨ÏïÑ': 'ÌÖåÏä¨Îùº',
                'ÌÖåÏä¨Îùº': 'ÌÖåÏä¨Îùº',
                'Ìè≠Ïä§Î∞îÍ≤êÍ∑∏Î£πÏΩîÎ¶¨ÏïÑ': 'Ìè≠Ïä§Î∞îÍ≤ê',
                'Ìè¨Î•¥ÏâêÏΩîÎ¶¨ÏïÑ': 'Ìè¨Î•¥Ïâê',
                'Î≥ºÎ≥¥ÏûêÎèôÏ∞®ÏΩîÎ¶¨ÏïÑ': 'Î≥ºÎ≥¥',
                'Ï†úÎÑ§ÏãúÏä§ÏΩîÎ¶¨ÏïÑ': 'Ï†úÎÑ§ÏãúÏä§'
            };
            
            data.forEach(row => {
                const originalManufacturer = row['Ï†úÏ°∞ÏÇ¨'];
                const manufacturer = nameMap[originalManufacturer] || originalManufacturer;
                const model = row['Î™®Îç∏Î™Ö'] || row['Ï∞®Ï¢Ö'];
                const nationalSubsidy = parseInt(row['Íµ≠ÎπÑÎ≥¥Ï°∞Í∏à(ÎßåÏõê)']) || 0;
                
                if (manufacturer && model && nationalSubsidy > 0) {
                    const vehicleKey = `${manufacturer}_${model}`;
                    
                    if (!vehicleMap.has(vehicleKey)) {
                        vehicleMap.set(vehicleKey, {
                            id: vehicleKey,
                            manufacturer: manufacturer,
                            model: model,
                            nationalSubsidy: nationalSubsidy,
                            regions: new Map()
                        });
                    }
                    
                    // ÏßÄÏó≠Î≥Ñ Î≥¥Ï°∞Í∏à Ï†ÄÏû•
                    const region = row['ÏßÄÏó≠'];
                    const localSubsidy = parseInt(row['ÏßÄÎ∞©ÎπÑÎ≥¥Ï°∞Í∏à(ÎßåÏõê)']) || 0;
                    
                    if (region && localSubsidy > 0) {
                        vehicleMap.get(vehicleKey).regions.set(region, localSubsidy);
                    }
                }
            });
            
            vehicleData = Array.from(vehicleMap.values());
            filteredVehicles = vehicleData;
            
            console.log(`Ï∞®Îüâ Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ ÏôÑÎ£å: ${vehicleData.length}Í∞ú`);
        }

        // ÏßÄÏó≠ Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨
        function processRegionData(data) {
            const regionMap = new Map();
            
            data.forEach(row => {
                const region = row['ÏßÄÏó≠'];
                const localSubsidy = parseInt(row['ÏßÄÎ∞©ÎπÑÎ≥¥Ï°∞Í∏à(ÎßåÏõê)']) || 0;
                
                if (region && localSubsidy > 0) {
                    if (!regionMap.has(region)) {
                        regionMap.set(region, []);
                    }
                    regionMap.get(region).push(localSubsidy);
                }
            });
            
            regionData = [];
            regionMap.forEach((subsidies, region) => {
                // ÌèâÍ∑† Î≥¥Ï°∞Í∏à Í≥ÑÏÇ∞
                const avgSubsidy = Math.round(subsidies.reduce((sum, s) => sum + s, 0) / subsidies.length);
                regionData.push({
                    region: region,
                    subsidy: avgSubsidy,
                    count: subsidies.length
                });
            });
            
            // ÏßÄÏó≠ ÏàúÏÑú Ï†ïÎ†¨ (ÏàòÎèÑÍ∂å -> Í¥ëÏó≠Ïãú -> ÎèÑ Ïàú)
            const regionOrder = {
                // ÏàòÎèÑÍ∂å
                'ÏÑúÏö∏ÌäπÎ≥ÑÏãú': 1,
                'Í≤ΩÍ∏∞ÎèÑ': 2,
                'Ïù∏Ï≤úÍ¥ëÏó≠Ïãú': 3,
                // Í¥ëÏó≠Ïãú
                'Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú': 11,
                'ÎåÄÍµ¨Í¥ëÏó≠Ïãú': 12,
                'Í¥ëÏ£ºÍ¥ëÏó≠Ïãú': 13,
                'ÎåÄÏ†ÑÍ¥ëÏó≠Ïãú': 14,
                'Ïö∏ÏÇ∞Í¥ëÏó≠Ïãú': 15,
                'ÏÑ∏Ï¢ÖÌäπÎ≥ÑÏûêÏπòÏãú': 16,
                // ÎèÑ
                'Í∞ïÏõêÎèÑ': 21,
                'Ï∂©Ï≤≠Î∂ÅÎèÑ': 22,
                'Ï∂©Ï≤≠ÎÇ®ÎèÑ': 23,
                'Ï†ÑÎùºÎ∂ÅÎèÑ': 24,
                'Ï†ÑÎùºÎÇ®ÎèÑ': 25,
                'Í≤ΩÏÉÅÎ∂ÅÎèÑ': 26,
                'Í≤ΩÏÉÅÎÇ®ÎèÑ': 27,
                'Ï†úÏ£ºÌäπÎ≥ÑÏûêÏπòÎèÑ': 28
            };
            
            regionData.sort((a, b) => {
                const orderA = regionOrder[a.region] || 50;
                const orderB = regionOrder[b.region] || 50;
                if (orderA !== orderB) return orderA - orderB;
                return a.region.localeCompare(b.region);
            });
            
            console.log(`ÏßÄÏó≠ Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ ÏôÑÎ£å: ${regionData.length}Í∞ú`);
        }

        // Îç∞Ïù¥ÌÑ∞ ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ (Ìï®Ïàò ÏÇ≠Ï†úÎê®)

        // Í∏∞Î≥∏ Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ìï®Ïàò Ï†úÍ±∞Îê®

        // Ï†úÏ°∞ÏÇ¨ ÏòµÏÖò ÏÉùÏÑ±
        function populateManufacturerOptions() {
            const select = document.getElementById('manufacturerFilter');
            if (!select) return;
            
            // Í∏∞Ï°¥ ÏòµÏÖò Ï†úÍ±∞ (Ï≤´ Î≤àÏß∏ Ï†úÏô∏)
            while (select.children.length > 1) {
                select.removeChild(select.lastChild);
            }
            
            const manufacturers = [...new Set(vehicleData.map(vehicle => vehicle.manufacturer))];
            
            // Ï†úÏ°∞ÏÇ¨ Ïù¥Î¶Ñ Í∞ÑÏÜåÌôî
            const nameMap = {
                'ÌòÑÎåÄÏûêÎèôÏ∞®': 'ÌòÑÎåÄ',
                'Í∏∞ÏïÑÏûêÎèôÏ∞®': 'Í∏∞ÏïÑ',
                'Í∏∞ÏïÑ': 'Í∏∞ÏïÑ',
                'Î©îÎ•¥ÏÑ∏Îç∞Ïä§Î≤§Ï∏†ÏΩîÎ¶¨ÏïÑ': 'Î≤§Ï∏†',
                'Î©îÎ•¥ÏÑ∏Îç∞Ïä§-Î≤§Ï∏† ÏΩîÎ¶¨ÏïÑ': 'Î≤§Ï∏†',
                'ÌÖåÏä¨ÎùºÏΩîÎ¶¨ÏïÑ': 'ÌÖåÏä¨Îùº',
                'ÌÖåÏä¨Îùº': 'ÌÖåÏä¨Îùº',
                'Ìè≠Ïä§Î∞îÍ≤êÍ∑∏Î£πÏΩîÎ¶¨ÏïÑ': 'Ìè≠Ïä§Î∞îÍ≤ê',
                'Ìè¨Î•¥ÏâêÏΩîÎ¶¨ÏïÑ': 'Ìè¨Î•¥Ïâê',
                'Î≥ºÎ≥¥ÏûêÎèôÏ∞®ÏΩîÎ¶¨ÏïÑ': 'Î≥ºÎ≥¥',
                'Ï†úÎÑ§ÏãúÏä§ÏΩîÎ¶¨ÏïÑ': 'Ï†úÎÑ§ÏãúÏä§'
            };
            
            // Ï†úÏ°∞ÏÇ¨ Ï†ïÎ†¨: ÌòÑÎåÄ, Í∏∞ÏïÑ Ïö∞ÏÑ†, Í∑∏ Îã§Ïùå Ïù∏Í∏∞ Ï†úÏ°∞ÏÇ¨
            const priorityOrder = {
                'ÌòÑÎåÄ': 1,
                'Í∏∞ÏïÑ': 2,
                'BMW': 3,
                'Î≤§Ï∏†': 4,
                'ÌÖåÏä¨Îùº': 5,
                'ÏïÑÏö∞Îîî': 6,
                'Ìè≠Ïä§Î∞îÍ≤ê': 7,
                'Î≥ºÎ≥¥': 8,
                'Ìè¨Î•¥Ïâê': 9,
                'Ï†úÎÑ§ÏãúÏä§': 10
            };
            
            manufacturers.sort((a, b) => {
                const displayA = nameMap[a] || a;
                const displayB = nameMap[b] || b;
                const orderA = priorityOrder[displayA] || 999;
                const orderB = priorityOrder[displayB] || 999;
                if (orderA !== orderB) return orderA - orderB;
                return displayA.localeCompare(displayB);
            });
            
            manufacturers.forEach(manufacturer => {
                const option = document.createElement('option');
                option.value = manufacturer;
                const displayName = nameMap[manufacturer] || manufacturer;
                option.textContent = displayName;
                select.appendChild(option);
            });
        }

        // Ï†úÏ°∞ÏÇ¨Î≥Ñ ÌïÑÌÑ∞ÎßÅ
        function filterByManufacturer() {
            const selectedManufacturer = document.getElementById('manufacturerFilter').value;
            
            if (selectedManufacturer) {
                filteredVehicles = vehicleData.filter(vehicle => vehicle.manufacturer === selectedManufacturer);
            } else {
                filteredVehicles = vehicleData;
            }
            
            populateVehicleList();
            updateVehicleCount(filteredVehicles.length);
        }

        // Ï∞®Îüâ Î™©Î°ù ÏÉùÏÑ±
        function populateVehicleList() {
            const vehicleList = document.getElementById('vehicleList');
            if (!vehicleList) return;
            
            vehicleList.innerHTML = '';
            
            // ÏÑ†ÌÉù ÏïàÌï® ÏòµÏÖò Ï∂îÍ∞Ä (Î≥ÑÎèÑ Î∞ïÏä§)
            const noSelectionItem = document.createElement('div');
            noSelectionItem.className = 'no-selection-item';
            noSelectionItem.onclick = () => selectVehicleFromList(null, noSelectionItem);
            noSelectionItem.innerHTML = '<div class="no-selection-text">üö´ Ï∞®Îüâ ÏÑ†ÌÉù ÏïàÌï® <span style="font-size: 0.875rem; color: #64748b; font-weight: normal;">(Ï∑®ÎìùÏÑ∏Îßå Í≥ÑÏÇ∞)</span></div>';
            vehicleList.appendChild(noSelectionItem);
            
            if (filteredVehicles.length === 0) {
                const emptyItem = document.createElement('div');
                emptyItem.className = 'vehicle-item';
                emptyItem.innerHTML = '<div class="vehicle-name">Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.</div>';
                vehicleList.appendChild(emptyItem);
                return;
            }
            
            // Ï∞®Îüâ Ï†ïÎ†¨: Ï†úÏ°∞ÏÇ¨Î≥ÑÎ°ú Ïù∏Í∏∞ Î™®Îç∏ Ïö∞ÏÑ†
            const vehiclePriority = {
                'ÌòÑÎåÄ': {'ÏïÑÏù¥Ïò§Îãâ 5': 1, 'ÏïÑÏù¥Ïò§Îãâ 6': 2, 'ÏΩîÎÇò Electric': 3, 'NEXO': 4},
                'Í∏∞ÏïÑ': {'EV6': 1, 'EV9': 2, 'ÎãàÎ°ú EV': 3, 'Î¥âÍ≥†3 EV': 4},
                'BMW': {'i4': 1, 'iX': 2, 'i7': 3},
                'Î≤§Ï∏†': {'EQE': 1, 'EQS': 2, 'EQA': 3},
                'ÌÖåÏä¨Îùº': {'Model 3': 1, 'Model Y': 2, 'Model S': 3, 'Model X': 4}
            };
            
            filteredVehicles.sort((a, b) => {
                const manufacturerPriority = vehiclePriority[a.manufacturer] || {};
                const priorityA = manufacturerPriority[a.model] || 999;
                const priorityB = manufacturerPriority[b.model] || 999;
                if (priorityA !== priorityB) return priorityA - priorityB;
                return b.nationalSubsidy - a.nationalSubsidy; // Î≥¥Ï°∞Í∏à ÎÜíÏùÄ Ïàú
            });
            
            filteredVehicles.forEach((vehicle) => {
                const vehicleItem = document.createElement('div');
                vehicleItem.className = 'vehicle-item';
                vehicleItem.onclick = () => selectVehicleFromList(vehicle, vehicleItem);
                
                // Î≥¥Ï°∞Í∏à Í∏àÏï°Ïóê Îî∞Î•∏ ÏÉâÏÉÅ ÌÅ¥ÎûòÏä§ Í≤∞Ï†ï
                let subsidyClass = 'subsidy-high';
                if (vehicle.nationalSubsidy < 300) {
                    subsidyClass = 'subsidy-low';
                } else if (vehicle.nationalSubsidy < 500) {
                    subsidyClass = 'subsidy-medium';
                }
                
                vehicleItem.innerHTML = `
                    <div class="vehicle-name">${vehicle.manufacturer} ${vehicle.model}</div>
                    <div class="vehicle-subsidy ${subsidyClass}">Íµ≠Í≥† Î≥¥Ï°∞Í∏à: ${vehicle.nationalSubsidy}ÎßåÏõê</div>
                `;
                
                vehicleList.appendChild(vehicleItem);
            });
            
            updateVehicleCount(filteredVehicles.length);
        }

        // Ï∞®Îüâ Í∞úÏàò ÏóÖÎç∞Ïù¥Ìä∏
        function updateVehicleCount(count) {
            const countElement = document.getElementById('vehicleCount');
            if (countElement) {
                countElement.textContent = `Ï¥ù ${count}Í∞ú Ï∞®Îüâ`;
            }
        }

        // Ï∞®Îüâ ÏÑ†ÌÉù
        function selectVehicleFromList(vehicle, element) {
            // Ïù¥Ï†Ñ ÏÑ†ÌÉù Ìï¥Ï†ú
            document.querySelectorAll('.vehicle-item, .no-selection-item').forEach(item => item.classList.remove('selected'));
            
            // ÌòÑÏû¨ ÏÑ†ÌÉù ÌëúÏãú
            element.classList.add('selected');
            
            // Ï∞®Îüâ Ï†ïÎ≥¥ Ï†ÄÏû•
            selectedVehicle = vehicle;
            
            // ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏à Ï≤òÎ¶¨ (ÏßÄÏó≠Î≥Ñ Î≥¥Ï°∞Í∏à ÌÉ≠Ïù∏ Í≤ΩÏö∞ÏóêÎßå)
            if (currentLocalSubsidyTab === 'region') {
                const localSubsidySelect = document.getElementById('localSubsidy');
                
                if (vehicle) {
                    // ÏßÄÏó≠Î≥Ñ Î≥¥Ï°∞Í∏à ÏóÖÎç∞Ïù¥Ìä∏
                    updateLocalSubsidyForVehicle(vehicle);
                } else {
                    // Ï∞®ÎüâÏù¥ ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ Ï†ÑÏ≤¥ ÏßÄÏó≠ Î™©Î°ù ÌëúÏãú
                    updateLocalSubsidyOptions();
                }
                localSubsidySelect.value = 0;
            }
            
            // ÏÑ†ÌÉùÎêú Ï∞®Îüâ Ï†ïÎ≥¥ ÌëúÏãú
            if (vehicle) {
                showSelectedVehicleInfo(`${vehicle.manufacturer} ${vehicle.model}`, vehicle.nationalSubsidy);
                // Îπ†Î•∏ Í≥ÑÏÇ∞Í∏∞ ÎèôÍ∏∞Ìôî
                document.getElementById('quickSubsidy').value = vehicle.nationalSubsidy;
                
                // Ï∞®ÎüâÏùÑ ÏÑ†ÌÉùÌïòÎ©¥ Ï∞®Îüâ Í∞ÄÏï° ÏûÖÎ†•ÎûÄÏóê Ìè¨Ïª§Ïä§
                const vehiclePriceInput = document.getElementById('vehiclePrice');
                if (vehiclePriceInput && !vehiclePriceInput.value) {
                    vehiclePriceInput.focus();
                    vehiclePriceInput.style.borderColor = '#3b82f6';
                    vehiclePriceInput.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.1)';
                }
            } else {
                showSelectedVehicleInfo('Ï∞®Îüâ ÏÑ†ÌÉù ÏïàÌï® (Ï∑®ÎìùÏÑ∏Îßå Í≥ÑÏÇ∞)', 0);
                document.getElementById('quickSubsidy').value = 0;
            }
            
            syncQuickCalc();
        }

        // ÏßÄÏó≠Î≥Ñ Î≥¥Ï°∞Í∏à ÏòµÏÖò ÏóÖÎç∞Ïù¥Ìä∏ (Ï∞®ÎüâÏù¥ ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞)
        function updateLocalSubsidyOptions() {
            const select = document.getElementById('localSubsidy');
            
            // Í∏∞Ï°¥ ÏòµÏÖò Ï†úÍ±∞
            select.innerHTML = '<option value="0">ÏßÄÏó≠ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>';
            
            // Î™®Îì† ÏßÄÏó≠ Ï∂îÍ∞Ä
            regionData.forEach(item => {
                const option = document.createElement('option');
                option.value = item.subsidy;
                option.textContent = `${item.region} (${item.subsidy}ÎßåÏõê)`;
                select.appendChild(option);
            });
        }

        // ÏÑ†ÌÉùÎêú Ï∞®ÎüâÏùò ÏßÄÏó≠Î≥Ñ Î≥¥Ï°∞Í∏à ÏóÖÎç∞Ïù¥Ìä∏
        function updateLocalSubsidyForVehicle(vehicle) {
            const select = document.getElementById('localSubsidy');
            
            // Í∏∞Ï°¥ ÏòµÏÖò Ï†úÍ±∞
            select.innerHTML = '<option value="0">ÏßÄÏó≠ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>';
            
            // Ï∞®ÎüâÎ≥Ñ ÏßÄÏó≠ Î≥¥Ï°∞Í∏àÏù¥ ÏûàÎäî Í≤ΩÏö∞ Ïö∞ÏÑ† ÌëúÏãú
            if (vehicle && vehicle.regions && vehicle.regions.size > 0) {
                vehicle.regions.forEach((subsidy, region) => {
                    const option = document.createElement('option');
                    option.value = subsidy;
                    option.textContent = `${region} (${subsidy}ÎßåÏõê)`;
                    option.style.fontWeight = 'bold';
                    option.style.color = '#059669';
                    select.appendChild(option);
                });
                
                // Íµ¨Î∂ÑÏÑ† Ï∂îÍ∞Ä
                const divider = document.createElement('option');
                divider.disabled = true;
                divider.textContent = '‚îÄ‚îÄ Í∏∞ÌÉÄ ÏßÄÏó≠ ‚îÄ‚îÄ';
                select.appendChild(divider);
            }
            
            // ÎÇòÎ®∏ÏßÄ ÏßÄÏó≠Îì§ Ï∂îÍ∞Ä
            regionData.forEach(item => {
                // Ïù¥ÎØ∏ Ï∞®ÎüâÎ≥Ñ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÎäî ÏßÄÏó≠ÏùÄ Ï†úÏô∏
                if (vehicle && vehicle.regions && vehicle.regions.has(item.region)) {
                    return;
                }
                
                const option = document.createElement('option');
                option.value = item.subsidy;
                option.textContent = `${item.region} (${item.subsidy}ÎßåÏõê)`;
                select.appendChild(option);
            });
        }

        // ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏à ÏÑ†ÌÉù ÏòµÏÖò ÏÉùÏÑ± (Ìï®Ïàò Ï†úÍ±∞Îê®)

        // ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏à ÌÉ≠ Ï†ÑÌôò
        function switchLocalSubsidyTab(tab) {
            currentLocalSubsidyTab = tab;
            
            // ÌÉ≠ Î≤ÑÌäº ÌôúÏÑ±Ìôî ÏÉÅÌÉú Î≥ÄÍ≤Ω
            const localSubsidyTabs = document.querySelectorAll('.form-group:last-of-type .vehicle-tab');
            localSubsidyTabs.forEach(t => t.classList.remove('active'));
            localSubsidyTabs[tab === 'region' ? 0 : 1].classList.add('active');
            
            // ÌÉ≠ Ìå®ÎÑê ÌëúÏãú/Ïà®ÍπÄ
            document.getElementById('region-tab').classList.toggle('active', tab === 'region');
            document.getElementById('manual-tab').classList.toggle('active', tab === 'manual');
            
            // Îπ†Î•∏ Í≥ÑÏÇ∞Í∏∞ ÎèôÍ∏∞Ìôî
            syncQuickCalc();
        }

        // Ï∞®Îüâ ÌÉ≠ Ï†ÑÌôò
        function switchVehicleTab(tab) {
            currentTab = tab;
            
            // Ï∞®Îüâ ÏÑ†ÌÉù ÌÉ≠Ïùò ÌÉ≠ Î≤ÑÌäºÎßå ÌôúÏÑ±Ìôî ÏÉÅÌÉú Î≥ÄÍ≤Ω
            const vehicleTabButtons = document.querySelectorAll('.vehicle-selection .vehicle-tab');
            vehicleTabButtons.forEach((t, index) => {
                if (index === 0 && tab === 'list') t.classList.add('active');
                else if (index === 1 && tab === 'direct') t.classList.add('active');
                else t.classList.remove('active');
            });
            
            // Ï∞®Îüâ ÏÑ†ÌÉù ÌÉ≠Ïùò Ìå®ÎÑêÎßå Î≥ÄÍ≤Ω
            document.getElementById('list-tab').classList.toggle('active', tab === 'list');
            document.getElementById('direct-tab').classList.toggle('active', tab === 'direct');
            
            // ÏßÅÏ†ë ÏûÖÎ†• ÌÉ≠ÏúºÎ°ú Ï†ÑÌôò Ïãú Ï∞®Îüâ ÏÑ†ÌÉù Ï¥àÍ∏∞Ìôî
            if (tab === 'direct') {
                // Î™®Îì† ÏÑ†ÌÉù Ìï¥Ï†ú
                document.querySelectorAll('.vehicle-item, .no-selection-item').forEach(item => item.classList.remove('selected'));
                selectedVehicle = null;
                
                // ÏÑ†ÌÉùÎêú Ï∞®Îüâ Ï†ïÎ≥¥ Ïà®ÍπÄ
                document.getElementById('selectedVehicleInfo').style.display = 'none';
                
                // ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏àÏù¥ ÏßÄÏó≠Î≥Ñ ÌÉ≠Ïù∏ Í≤ΩÏö∞ Ï¥àÍ∏∞Ìôî
                if (currentLocalSubsidyTab === 'region') {
                    const localSubsidySelect = document.getElementById('localSubsidy');
                    // Ï∞®ÎüâÏù¥ ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ Ï†ÑÏ≤¥ ÏßÄÏó≠ Î™©Î°ù ÌëúÏãú
                    updateLocalSubsidyOptions();
                    localSubsidySelect.value = 0;
                }
                
                // Îπ†Î•∏ Í≥ÑÏÇ∞Í∏∞ Ï¥àÍ∏∞Ìôî
                document.getElementById('quickSubsidy').value = 0;
                if (currentLocalSubsidyTab === 'region') {
                    document.getElementById('quickLocal').value = 0;
                }
            }
        }

        // ÏÑ†ÌÉùÎêú Ï∞®Îüâ Ï†ïÎ≥¥ ÌëúÏãú
        function showSelectedVehicleInfo(name, subsidy) {
            document.getElementById('selectedVehicleName').textContent = name;
            document.getElementById('selectedVehicleSubsidy').textContent = subsidy;
            document.getElementById('selectedVehicleInfo').style.display = 'block';
        }

        // Í∞ÄÍ≤© Ï°∞Ïûë Ìï®ÏàòÎì§
        function addPrice(amount) {
            const priceInput = document.getElementById('vehiclePrice');
            const currentValue = parseInt(priceInput.value) || 0;
            priceInput.value = currentValue + amount;
            syncQuickCalc();
        }

        function clearPrice() {
            document.getElementById('vehiclePrice').value = '';
            document.getElementById('quickPrice').value = '';
        }

        // Ï¢åÏ∏°Í≥º Ïö∞Ï∏° ÎèôÍ∏∞Ìôî
        function syncQuickCalc() {
            const vehiclePrice = document.getElementById('vehiclePrice').value;
            
            if (vehiclePrice) {
                document.getElementById('quickPrice').value = vehiclePrice;
            }

            // ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏à ÎèôÍ∏∞Ìôî
            let localSubsidyValue = 0;
            if (currentLocalSubsidyTab === 'region') {
                localSubsidyValue = document.getElementById('localSubsidy').value;
            } else {
                localSubsidyValue = document.getElementById('customLocalSubsidy').value;
            }
            
            if (localSubsidyValue) {
                document.getElementById('quickLocal').value = localSubsidyValue;
            }

            // ÏÑ†ÌÉùÎêú Ï∞®ÎüâÏù¥ ÏûàÏúºÎ©¥ Î≥¥Ï°∞Í∏àÎèÑ ÎèôÍ∏∞Ìôî
            if (selectedVehicle && selectedVehicle.nationalSubsidy) {
                document.getElementById('quickSubsidy').value = selectedVehicle.nationalSubsidy;
            } else if (currentTab === 'direct') {
                const customSubsidy = document.getElementById('customSubsidy').value;
                if (customSubsidy) {
                    document.getElementById('quickSubsidy').value = customSubsidy;
                }
            }
        }

        // Îπ†Î•∏ Í≥ÑÏÇ∞ Í∏∞Îä•
        function quickCalculate() {
            const quickPrice = parseInt(document.getElementById('quickPrice').value) || 0;
            const quickSubsidy = parseInt(document.getElementById('quickSubsidy').value) || 0;
            const quickLocal = parseInt(document.getElementById('quickLocal').value) || 0;

            if (!quickPrice) return;

            // Î≥¥Ï°∞Í∏à ÏßÄÏõê Í∏∞Ï§Ä Ï†ÅÏö©
            let subsidyRate = 1;
            if (quickPrice >= 8500) {
                subsidyRate = 0;
            } else if (quickPrice >= 5300) {
                subsidyRate = 0.5;
            }

            const finalNationalSubsidy = Math.floor(quickSubsidy * subsidyRate);
            const finalLocalSubsidy = Math.floor(quickLocal * subsidyRate);
            const totalSubsidy = finalNationalSubsidy + finalLocalSubsidy;

            // Ï∞®Îüâ Ï¢ÖÎ•òÏóê Îî∞Î•∏ ÏÑ∏Ïú® Ï†ÅÏö©
            const vehicleType = document.getElementById('vehicleType').value;
            const taxRates = {
                'passenger': 0.07,
                'compact': 0.04,  // Í≤ΩÏ∞®
                'van': 0.05,
                'truck': 0.05,
                'commercial': 0.04
            };
            const taxRate = taxRates[vehicleType] || 0.07;
            
            // Í∏∞Î≥∏ Ï∑®ÎìùÏÑ∏ Í≥ÑÏÇ∞
            const baseTax = Math.floor(quickPrice * taxRate);
            
            // Í∞êÎ©¥ Í≥ÑÏÇ∞
            let taxReduction;
            if (vehicleType === 'compact') {
                // Í≤ΩÏ∞®: 4% Ï†ÅÏö© ÌõÑ 75ÎßåÏõê Í∞êÎ©¥
                taxReduction = 75;
            } else {
                // ÏùºÎ∞ò Ï†ÑÍ∏∞Ï∞®: ÏµúÎåÄ 140ÎßåÏõê Í∞êÎ©¥
                taxReduction = Math.min(140, baseTax);
            }
            const finalTax = Math.max(0, baseTax - taxReduction);

            // Ï¥ù ÏßÄÎ∂à Í∏àÏï°
            const totalPayment = Math.max(0, quickPrice + finalTax - totalSubsidy);

            // Í≤∞Í≥º ÌëúÏãú
            document.getElementById('quickNationalSubsidy').textContent = `${finalNationalSubsidy.toLocaleString()}ÎßåÏõê`;
            document.getElementById('quickLocalSubsidy').textContent = `${finalLocalSubsidy.toLocaleString()}ÎßåÏõê`;
            document.getElementById('quickTotalSubsidy').textContent = `${totalSubsidy.toLocaleString()}ÎßåÏõê`;
            document.getElementById('quickTax').textContent = `${finalTax.toLocaleString()}ÎßåÏõê`;
            document.getElementById('quickFinalAmount').textContent = `${totalPayment.toLocaleString()}ÎßåÏõê`;

            document.getElementById('quickResults').style.display = 'block';
        }

        // Î©îÏù∏ Í≥ÑÏÇ∞ Í∏∞Îä•
        function calculateTax() {
            const vehiclePrice = parseInt(document.getElementById('vehiclePrice').value) || 0;
            const vehicleType = document.getElementById('vehicleType').value;
            
            // ÏßÄÏûêÏ≤¥ Î≥¥Ï°∞Í∏à Í∞ÄÏ†∏Ïò§Í∏∞
            let localSubsidyAmount = 0;
            if (currentLocalSubsidyTab === 'region') {
                localSubsidyAmount = parseInt(document.getElementById('localSubsidy').value) || 0;
            } else {
                localSubsidyAmount = parseInt(document.getElementById('customLocalSubsidy').value) || 0;
            }

            if (!vehiclePrice) {
                alert('Ï∞®Îüâ Í∞ÄÏï°ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            // Íµ≠Í≥† Î≥¥Ï°∞Í∏à Í≤∞Ï†ï
            let nationalSubsidy = 0;
            if (currentTab === 'list' && selectedVehicle) {
                nationalSubsidy = selectedVehicle.nationalSubsidy;
            } else if (currentTab === 'direct') {
                nationalSubsidy = parseInt(document.getElementById('customSubsidy').value) || 0;
            }

            // ÏÑ∏Ïú® ÏÑ§Ï†ï
            const taxRates = {
                'passenger': 0.07,
                'compact': 0.04,  // Í≤ΩÏ∞®
                'van': 0.05,
                'truck': 0.05,
                'commercial': 0.04
            };

            // Î≥¥Ï°∞Í∏à ÏßÄÏõê Í∏∞Ï§Ä Ï†ÅÏö©
            let subsidyRate = 1;
            if (vehiclePrice >= 8500) {
                subsidyRate = 0;
            } else if (vehiclePrice >= 5300) {
                subsidyRate = 0.5;
            }

            const finalNationalSubsidy = Math.floor(nationalSubsidy * subsidyRate);
            const finalLocalSubsidy = Math.floor(localSubsidyAmount * subsidyRate);
            const totalSubsidy = finalNationalSubsidy + finalLocalSubsidy;

            // Í∏∞Î≥∏ Ï∑®ÎìùÏÑ∏ Í≥ÑÏÇ∞
            const taxRate = taxRates[vehicleType];
            const baseTax = Math.floor(vehiclePrice * taxRate);

            // Í∞êÎ©¥ Í≥ÑÏÇ∞
            let taxReduction;
            if (vehicleType === 'compact') {
                // Í≤ΩÏ∞®: 4% Ï†ÅÏö© ÌõÑ 75ÎßåÏõê Í∞êÎ©¥
                taxReduction = 75;
            } else {
                // ÏùºÎ∞ò Ï†ÑÍ∏∞Ï∞®: ÏµúÎåÄ 140ÎßåÏõê Í∞êÎ©¥
                taxReduction = Math.min(140, baseTax);
            }
            const finalTax = Math.max(0, baseTax - taxReduction);

            // Ï¥ù ÏßÄÎ∂à Í∏àÏï°
            const totalPayment = Math.max(0, vehiclePrice + finalTax - totalSubsidy);

            // Í≤∞Í≥º ÌëúÏãú
            displayResults({
                nationalSubsidy: finalNationalSubsidy,
                localSubsidy: finalLocalSubsidy,
                totalSubsidy: totalSubsidy,
                baseTax: baseTax,
                taxReduction: taxReduction,
                finalTax: finalTax,
                totalPayment: totalPayment,
                vehiclePrice: vehiclePrice
            });

            const resultSection = document.getElementById('resultSection');
            resultSection.style.display = 'block';
            resultSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Îπ†Î•∏ Í≥ÑÏÇ∞ÎèÑ ÏûêÎèôÏúºÎ°ú Ïã§Ìñâ
            quickCalculate();
        }

        // Í≤∞Í≥º ÌëúÏãú
        function displayResults(results) {
            // Í≥ÑÏÇ∞ ÏöîÏïΩ ÌëúÏãú
            document.getElementById('vehiclePriceDisplay').textContent = `${results.vehiclePrice.toLocaleString()}ÎßåÏõê`;
            
            // Ï∑®ÎìùÏÑ∏ ÏÑ∏Î∂Ä Ìï≠Î™©
            document.getElementById('baseTaxDisplay').textContent = `${results.baseTax.toLocaleString()}ÎßåÏõê`;
            document.getElementById('taxReductionDisplay').textContent = `${results.taxReduction.toLocaleString()}ÎßåÏõê`;
            document.getElementById('finalTaxDisplay').textContent = `${results.finalTax.toLocaleString()}ÎßåÏõê`;
            
            // Î≥¥Ï°∞Í∏à ÏÑ∏Î∂Ä Ìï≠Î™©
            document.getElementById('nationalSubsidyDisplay').textContent = `${results.nationalSubsidy.toLocaleString()}ÎßåÏõê`;
            document.getElementById('localSubsidyDisplay').textContent = `${results.localSubsidy.toLocaleString()}ÎßåÏõê`;
            document.getElementById('totalSubsidyDisplay').textContent = `${results.totalSubsidy.toLocaleString()}ÎßåÏõê`;
            
            // ÏµúÏ¢Ö Í≤∞Í≥º
            document.getElementById('totalPaymentBreakdown').textContent = `${results.totalPayment.toLocaleString()}ÎßåÏõê`;
        }
    </script>
</body>
</html>